<!DOCTYPE html>
<html lang="zh-Hans">

<head>

  <!-- Minima -->
  <!-- Hexo theme created by @adisaktijrs -->

  <!-- Basic Page Needs
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <meta charset="utf-8">

  
  <title>Mybatiså­¦ä¹ ç¬”è®°-ä¸€</title>
  
  <link rel="canonical" href="http://homxuwang.github.io/2018/11/19/Mybatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80/">
  
  <meta name="description" content="Mybatisæ¶æ„å›¾ å‡†å¤‡æµ‹è¯•æ•°æ®åº“1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162/*Navicat MySQL D">
  
  
  <meta name="author" content="homxuwang">
  
  
  
  <meta property="og:site_name" content="Homxu" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="Mybatiså­¦ä¹ ç¬”è®°-ä¸€" />
  
  <meta property="og:description" content="Mybatisæ¶æ„å›¾ å‡†å¤‡æµ‹è¯•æ•°æ®åº“1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162/*Navicat MySQL D">
  
  <meta property="og:url" content="http://homxuwang.github.io/2018/11/19/Mybatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80/" />

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Mybatiså­¦ä¹ ç¬”è®°-ä¸€">
  
  <meta name="twitter:description" content="Mybatisæ¶æ„å›¾ å‡†å¤‡æµ‹è¯•æ•°æ®åº“1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162/*Navicat MySQL D">
  
  
  
  
  <meta name="twitter:url" content="http://homxuwang.github.io/2018/11/19/Mybatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80/" />

  <!-- Mobile Specific Metas
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Preload fonts
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <link rel="preload" href="/fonts/dm-serif-display-v4-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/fonts/inter-v2-latin-regular.woff2" as="font" type="font/woff2" crossorigin>

  <!-- CSS
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  
<link rel="stylesheet" href="/css/normalize.css">

  
<link rel="stylesheet" href="/css/skeleton.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
<link rel="stylesheet" href="/css/prism-dark.css">

  
<link rel="stylesheet" href="/css/prism-line-numbers.css">

  <!-- User css -->
  
  
<link rel="stylesheet" href="/css/user.css">

  

  <!-- Favicon
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <link rel="icon" type="image/png" href="/images/favicon.png">

  <!-- Custom Theme Color Style
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <style>
  a:not(.icon) {
    text-decoration-color: #0FA0CE;
    background-image: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0) 50%,
      #0FA0CE 50%
    );
  }
  blockquote {
    border-left: 8px solid #0FA0CE;
  }
  .nanobar .bar {
    background: #0FA0CE;
  }
  .button.button-primary:hover,
  button.button-primary:hover,
  input[type="submit"].button-primary:hover,
  input[type="reset"].button-primary:hover,
  input[type="button"].button-primary:hover,
  .button.button-primary:focus,
  button.button-primary:focus,
  input[type="submit"].button-primary:focus,
  input[type="reset"].button-primary:focus,
  input[type="button"].button-primary:focus {
    background-color: #0FA0CE;
    border-color: #0FA0CE;
  }
  input[type="email"]:focus,
  input[type="number"]:focus,
  input[type="search"]:focus,
  input[type="text"]:focus,
  input[type="tel"]:focus,
  input[type="url"]:focus,
  input[type="password"]:focus,
  textarea:focus,
  select:focus {
    border: 1px solid #0FA0CE;
  }
</style>

  <!-- Google Analytics (With Privacy Settings On)
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  

  
  <script src="/js/pic.min.js" defer></script>
  

  
  <script src="/js/search.min.js" defer></script>
  

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div class="container">
    <div class="row">
      <div>

        <div class="row">
  <div class="two columns" style="max-width: 50px">
    <h1 class="mt-2 mode">
      <div onclick=setDarkMode(true) id="darkBtn">ğŸŒ‘</div>
      <div onclick=setDarkMode(false) id="lightBtn" class=hidden>â˜€ï¸</div>
      <script >
        if (localStorage.getItem('preferredTheme') == 'dark') {
          setDarkMode(true)
        }
        function setDarkMode(isDark) {
          var darkBtn = document.getElementById('darkBtn')
          var lightBtn = document.getElementById('lightBtn')
          if (isDark) {
            lightBtn.style.display = "block"
            darkBtn.style.display = "none"
            localStorage.setItem('preferredTheme', 'dark');
          } else {
            lightBtn.style.display = "none"
            darkBtn.style.display = "block"
            localStorage.removeItem('preferredTheme');
          }
          document.body.classList.toggle("darkmode");
        }
      </script>
    </h1>
  </div>

  <div class="six columns ml-1">
    <h1 class="mt-2">
      Hi July.HX
    </h1>
  </div>

  <div class="twelve columns">
    <div class="row">
      <div class="nine columns left">
        <a href="/">Home</a>
        
        
      </div>
    </div>
    <hr style="margin-bottom: 2.6rem">
  </div>
</div>

        <div class="trans">
            <h2>Mybatiså­¦ä¹ ç¬”è®°-ä¸€</h2>

  <h1 id="Mybatisæ¶æ„å›¾"><a href="#Mybatisæ¶æ„å›¾" class="headerlink" title="Mybatisæ¶æ„å›¾"></a>Mybatisæ¶æ„å›¾</h1><p><img src="Mybatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80/1.png" alt="Mybatisæ¶æ„å›¾"></p>
<h1 id="å‡†å¤‡æµ‹è¯•æ•°æ®åº“"><a href="#å‡†å¤‡æµ‹è¯•æ•°æ®åº“" class="headerlink" title="å‡†å¤‡æµ‹è¯•æ•°æ®åº“"></a>å‡†å¤‡æµ‹è¯•æ•°æ®åº“</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Navicat MySQL Data Transfer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Source Server         : localhost_3306</span></span><br><span class="line"><span class="comment">Source Server Version : 50521</span></span><br><span class="line"><span class="comment">Source Host           : localhost:3306</span></span><br><span class="line"><span class="comment">Source Database       : mybatis</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Target Server Type    : MYSQL</span></span><br><span class="line"><span class="comment">Target Server Version : 50521</span></span><br><span class="line"><span class="comment">File Encoding         : 65001</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Date: 2015-04-09 16:03:53</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS<span class="operator">=</span><span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for `orders`</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `orders`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `orders` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `user_id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¸‹å•ç”¨æˆ·id&#x27;</span>,</span><br><span class="line">  `number` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è®¢å•å·&#x27;</span>,</span><br><span class="line">  `createtime` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åˆ›å»ºè®¢å•æ—¶é—´&#x27;</span>,</span><br><span class="line">  `note` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¤‡æ³¨&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  KEY `FK_orders_1` (`user_id`),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `FK_orders_id` <span class="keyword">FOREIGN</span> KEY (`user_id`) <span class="keyword">REFERENCES</span> `<span class="keyword">user</span>` (`id`) <span class="keyword">ON</span> <span class="keyword">DELETE</span> <span class="keyword">NO</span> ACTION <span class="keyword">ON</span> UPDATE <span class="keyword">NO</span> ACTION</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">6</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of orders</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `orders` <span class="keyword">VALUES</span> (<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1000010&#x27;</span>, <span class="string">&#x27;2015-02-04 13:22:35&#x27;</span>, <span class="keyword">null</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `orders` <span class="keyword">VALUES</span> (<span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1000011&#x27;</span>, <span class="string">&#x27;2015-02-03 13:22:41&#x27;</span>, <span class="keyword">null</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `orders` <span class="keyword">VALUES</span> (<span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;1000012&#x27;</span>, <span class="string">&#x27;2015-02-12 16:13:23&#x27;</span>, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for `user`</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `<span class="keyword">user</span>`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `username` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç”¨æˆ·åç§°&#x27;</span>,</span><br><span class="line">  `birthday` <span class="type">date</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç”Ÿæ—¥&#x27;</span>,</span><br><span class="line">  `sex` <span class="type">char</span>(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ€§åˆ«&#x27;</span>,</span><br><span class="line">  `address` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åœ°å€&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">27</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of user</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;ç‹äº”&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;2&#x27;</span>, <span class="keyword">null</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;å¼ ä¸‰&#x27;</span>, <span class="string">&#x27;2014-07-10&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;åŒ—äº¬å¸‚&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="string">&#x27;16&#x27;</span>, <span class="string">&#x27;å¼ å°æ˜&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;æ²³å—éƒ‘å·&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="string">&#x27;22&#x27;</span>, <span class="string">&#x27;é™ˆå°æ˜&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;æ²³å—éƒ‘å·&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="string">&#x27;24&#x27;</span>, <span class="string">&#x27;å¼ ä¸‰ä¸°&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;æ²³å—éƒ‘å·&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="string">&#x27;25&#x27;</span>, <span class="string">&#x27;é™ˆå°æ˜&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;æ²³å—éƒ‘å·&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="string">&#x27;26&#x27;</span>, <span class="string">&#x27;ç‹äº”&#x27;</span>, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br></pre></td></tr></table></figure>

<h1 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h1><p>å¯¼å…¥æ‰€éœ€ä¾èµ–åŒ…ï¼š<br><img src="Mybatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80/2.png" alt="ä¾èµ–åŒ…"></p>
<p>æ ¹æ®1ä¸­çš„æ¶æ„å›¾ï¼Œé¦–å…ˆå‡†å¤‡é…ç½®æ–‡ä»¶ï¼š<br><code>SqlMapConfig.xml</code>:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta"><span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- ç”¨äºé…ç½®æ•°æ®åº“è¿æ¥ç¯å¢ƒ  å’Œspringæ•´åˆå environmentsé…ç½®å°†åºŸé™¤    --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- ä½¿ç”¨jdbcäº‹åŠ¡ç®¡ç† --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span> /&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- æ•°æ®åº“è¿æ¥æ±  --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span></span></span><br><span class="line"><span class="tag">					<span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;12345&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­<code>environments</code>æ ‡ç­¾æ˜¯ç”¨æ¥é…ç½®æ•°æ®åº“è¿æ¥ç¯å¢ƒçš„ï¼Œå› ä¸ºè¿™é‡Œæ˜¯å•ç‹¬æ˜¯mybatiså·¥ç¨‹ï¼Œæ‰€ä»¥è¦è¿›è¡Œé…ç½®ã€‚åæœŸåœ¨æ•´åˆSpringå·¥ç¨‹æ—¶ï¼Œæ•°æ®åº“çš„é…ç½®ç”±Springæ¥è´Ÿè´£ï¼Œå¯ä»¥å°†environmentsæ ‡ç­¾é™¤æ‰ã€‚</p>
<p>åœ¨<code>src</code>åŒ…ä¸‹åˆ›å»º<code>log4j.properties</code>.<br><code>log4j.properties</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Global logging configuration</span><br><span class="line">log4j.rootLogger=DEBUG, stdout</span><br><span class="line"># Console output...</span><br><span class="line">log4j.appender.stdout=org.apache.log4j.ConsoleAppender</span><br><span class="line">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m%n</span><br></pre></td></tr></table></figure>

<p>åˆ›å»º<code>user</code>è¡¨ä¸­å¯¹åº”çš„pojoç±».pojoç±»ä½œä¸ºmybatisè¿›è¡Œsqlæ˜ å°„ä½¿ç”¨ï¼Œpoç±»é€šå¸¸ä¸æ•°æ®åº“è¡¨å¯¹åº”.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> my.study.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">	<span class="keyword">private</span> Integer id;</span><br><span class="line">	<span class="keyword">private</span> String username;</span><br><span class="line">	<span class="keyword">private</span> String sex;</span><br><span class="line">	<span class="keyword">private</span> Date birthday;</span><br><span class="line">	<span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//çœç•¥getå’Œsetæ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;User [id=&quot;</span> + id + <span class="string">&quot;, username=&quot;</span> + username + <span class="string">&quot;, sex=&quot;</span> + sex</span><br><span class="line">				+ <span class="string">&quot;, birthday=&quot;</span> + birthday + <span class="string">&quot;, address=&quot;</span> + address + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨<code>my.study.mapper</code>åŒ…ä¸‹åˆ›å»º<code>user.xml</code>:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta"><span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä¹¦å†™sqlè¯­å¥ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨xmlä¸­å¼•å…¥çº¦æŸåï¼Œå…¶æ ¹æ ‡ç­¾å°±æ˜¯<code>&lt;mapper&gt;&lt;/mapper&gt;</code>,ç”¨æ¥åœ¨å…¶ä¸­ä¹¦å†™sqlè¯­å¥ã€‚</p>
<p>åœ¨è¿™é‡Œå®šä¹‰äº†<code>user.xml</code>æ–‡ä»¶åï¼Œæ ¹æ®æ¶æ„å›¾ï¼Œéœ€è¦å’Œæ ¸å¿ƒé…ç½®æ–‡ä»¶ç»“åˆï¼Œæ‰€ä»¥è¦åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨<code>&lt;mappers&gt;&lt;/mappers&gt;</code>æ ‡ç­¾ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Mapperçš„ä½ç½®  Mapper.xml å†™Sqlè¯­å¥çš„æ–‡ä»¶çš„ä½ç½® --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;my/study/mapper/User.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å‡†å¤‡å·¥ä½œå°±åŸºæœ¬å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥å°±è¦è¿›è¡Œæ¶æ„ä¸­çš„ç¬¬äºŒéƒ¨ï¼Œåˆ›å»ºå·¥å‚å’Œsessionå¹¶è¿›è¡Œæµ‹è¯•ã€‚</p>
<h1 id="æ“ä½œæ•°æ®åº“"><a href="#æ“ä½œæ•°æ®åº“" class="headerlink" title="æ“ä½œæ•°æ®åº“"></a>æ“ä½œæ•°æ®åº“</h1><h2 id="åœ¨é…ç½®æ–‡ä»¶ä¸­ä¹¦å†™sql"><a href="#åœ¨é…ç½®æ–‡ä»¶ä¸­ä¹¦å†™sql" class="headerlink" title="åœ¨é…ç½®æ–‡ä»¶ä¸­ä¹¦å†™sql"></a>åœ¨é…ç½®æ–‡ä»¶ä¸­ä¹¦å†™sql</h2><p>åœ¨<code>User.xml</code>é…ç½®æ–‡ä»¶ä¸­ä¹¦å†™æŸ¥è¯¢sql:</p>
<p><img src="Mybatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80/3.png" alt="æ ‡ç­¾åˆ—è¡¨"><br>å…¶ä¸­<code>&lt;&gt;cache</code>å’Œ<code>&lt;&gt;cache-ref</code>è¡¨ç¤ºç¼“å­˜,å®ƒä»¬å’Œ<code>&lt;&gt;parameterMap</code>éƒ½å¾ˆå°‘ç”¨åˆ°.<code>&lt;&gt;sql</code>è¡¨ç¤ºsqlç‰‡æ®µ,<code>&lt;&gt;result</code>è¡¨ç¤ºæ‰‹åŠ¨æ˜ å°„ã€‚å‰©ä¸‹çš„å¢åˆ æ”¹æŸ¥å’Œæ›´æ–°ã€‚</p>
<p>ä¹¦å†™æŸ¥è¯¢sqlï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æŸ¥è¯¢ç”¨æˆ· --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Integer&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;my.study.pojo.User&quot;</span>&gt;</span></span><br><span class="line">		select * from user where id = #&#123;v&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ ‡ç­¾ä¸­çš„<code>id</code>è¡¨ç¤ºè¿™æ¡sqlè¯­å¥åœ¨é…ç½®æ–‡ä»¶ä¸­çš„å”¯ä¸€æ ‡è¯†;<br><code>parameterType</code>è¡¨ç¤ºä¼ å‚çš„ç±»å‹;<br><code>resultType</code>è¡¨ç¤ºè‡ªåŠ¨æ˜ å°„æŸ¥è¯¢åˆ°çš„ç»“æœï¼Œå¡«å†™pojoçš„å…¨è·¯å¾„.è‡ªåŠ¨æ˜ å°„è¦æ±‚æ‰€åˆ›å»ºçš„ç±»è¦å’Œæ•°æ®åº“è¡¨ä¸­çš„å„ä¸ªå­—æ®µå’Œç±»å‹ç›¸å¯¹åº”,å¦‚æœä¸å¯¹åº”åˆ™éœ€è¦æ‰‹åŠ¨æ˜ å°„.<br><code>#&#123;&#125;</code>è¡¨ç¤ºå ä½ç¬¦ï¼Œç±»ä¼¼äºjdbcä¸­çš„?,å¤§æ‹¬å·ä¸­çš„å€¼å¯ä»¥éšä¾¿å†™.</p>
<p>å¦‚æœæœ‰å¦ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­çš„æŸ¥è¯¢è¯­å¥çš„idå’Œå·²å­˜åœ¨çš„é‡å¤ï¼Œè¿™æ—¶å€™å¯ä»¥åœ¨<code>&lt;mapper&gt;</code>æ·»åŠ <code>namespace=&quot;&quot;</code>,<code>namespace</code>è¡¨ç¤ºå‘½åç©ºé—´ï¼Œç”¨äºéš”ç¦»sql,é¿å…å‘ç”Ÿè¿™ç§æƒ…å†µ.<br>æ¯”å¦‚ä¿®æ”¹ä¸º:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶å€™å¯ä»¥ä½¿ç”¨<code>user.findUserById</code>è®¿é—®è¿™ä¸ªsql.</p>
<h2 id="ä¹¦å†™æµ‹è¯•ç±»"><a href="#ä¹¦å†™æµ‹è¯•ç±»" class="headerlink" title="ä¹¦å†™æµ‹è¯•ç±»"></a>ä¹¦å†™æµ‹è¯•ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> my.study.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> my.study.pojo.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="comment">//1.åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶</span></span><br><span class="line">		String resource = <span class="string">&quot;sqlMapConfig.xml&quot;</span>;</span><br><span class="line">		InputStream in = Resources.getResourceAsStream(resource);</span><br><span class="line">		<span class="comment">//2.åˆ›å»ºSqlSessionFactory</span></span><br><span class="line">		SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(in);</span><br><span class="line">		<span class="comment">//3.åˆ›å»ºSqlSession</span></span><br><span class="line">		SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">		<span class="comment">//4.æ‰§è¡ŒSqlè¯­å¥</span></span><br><span class="line">		User user = sqlSession.selectOne(<span class="string">&quot;user.findUserById&quot;</span>, <span class="number">10</span>);</span><br><span class="line">		System.out.println(user);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="Mybatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80/4.png" alt="å‚æ•°"><br>è¿™é‡Œ<code> sqlSession.selectOne()</code>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯ä¼ å…¥<code>&lt;mapper&gt;</code>çš„namespace+sqlè¯­å¥çš„id;ç¬¬äºŒä¸ªå°±æ˜¯ä¼ å…¥è¦è¿›è¡ŒæŸ¥è¯¢çš„å‚æ•°(ä¹Ÿå°±æ˜¯å ä½ç¬¦ä½ç½®çš„å€¼);</p>
<p>æµ‹è¯•ç»“æœ:<br><img src="Mybatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80/5.png" alt="æµ‹è¯•ç»“æœ"><br>å› ä¸ºåŠ å…¥äº†logæ—¥å¿—ï¼Œè¿™é‡Œä¼šæ‰“å°å‡ºå„ä¸ªä¿¡æ¯</p>
<h2 id="å®ç°æ¨¡ç³ŠæŸ¥è¯¢"><a href="#å®ç°æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="å®ç°æ¨¡ç³ŠæŸ¥è¯¢"></a>å®ç°æ¨¡ç³ŠæŸ¥è¯¢</h2><p>ä¹¦å†™sqlè¯­å¥:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ¨¡ç³ŠæŸ¥è¯¢ --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findUserByUsername&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;String&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;my.study.pojo.User&quot;</span>&gt;</span></span><br><span class="line">		select * from user where username like &#x27;%$&#123;value&#125;%&#x27;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œè¿™é‡Œçš„æ¨¡ç³ŠæŸ¥è¯¢ä¸­ä¸æ˜¯ç”¨å ä½ç¬¦<code>#&#123;&#125;</code>ï¼Œè€Œæ˜¯ä½¿ç”¨<code>$&#123;&#125;</code>ã€‚<br>ç±»æ¯”jdbcä¸­çš„å ä½ç¬¦ï¼Œ<code>#&#123;&#125;</code>ç›¸å½“äº<code>?</code><br>è€Œåœ¨éœ€è¦ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥åŠŸèƒ½æ—¶ï¼Œä½¿ç”¨<code>$&#123;&#125;</code>.å¹¶ä¸”å…¶ä¸­è¦å¡«å†™<code>value</code>,è€Œ<code>#&#123;&#125;</code>åˆ™æ²¡æœ‰è¿™ç§é™åˆ¶ã€‚<br>å ä½ç¬¦å¯ä»¥é˜²æ­¢sqlæ³¨å…¥ï¼Œè€Œå­—ç¬¦ä¸²æ‹¼æ¥ä¸èƒ½é˜²æ­¢sqlæ³¨å…¥ï¼Œ<code>#&#123;&#125;</code>å’Œ<code>$&#123;&#125;</code>ä¹Ÿæ˜¯ä¸€ä¸ªé“ç†ã€‚<br>åœ¨æµ‹è¯•ç±»ä¸­æ·»åŠ æµ‹è¯•æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®ç°æ¨¡ç³ŠæŸ¥è¯¢</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="comment">//1.åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶</span></span><br><span class="line">		String resource = <span class="string">&quot;sqlMapConfig.xml&quot;</span>;</span><br><span class="line">		InputStream in = Resources.getResourceAsStream(resource);</span><br><span class="line">		<span class="comment">//2.åˆ›å»ºSqlSessionFactory</span></span><br><span class="line">		SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(in);</span><br><span class="line">		<span class="comment">//3.åˆ›å»ºSqlSession</span></span><br><span class="line">		SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">		<span class="comment">//4.æ‰§è¡ŒSqlè¯­å¥</span></span><br><span class="line">		List&lt;User&gt; users = sqlSession.selectList(<span class="string">&quot;user.findUserByUsername&quot;</span>, <span class="string">&quot;äº”&quot;</span>);</span><br><span class="line">		<span class="keyword">for</span>(User user2:users) &#123;</span><br><span class="line">			System.out.println(user2);</span><br><span class="line">		&#125;		</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºæ¨¡ç³ŠæŸ¥è¯¢æŸ¥å‡ºæ¥çš„å¯èƒ½æœ‰å¾ˆå¤šç»“æœï¼Œæ‰€ä»¥ç”¨<code>List&lt;&gt;</code>.<br>æµ‹è¯•ç»“æœ:<br><img src="Mybatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80/6.png" alt="æµ‹è¯•ç»“æœ"></p>
<p>ä¸Šé¢æäº†è¿™æ ·ä¸èƒ½é˜²æ­¢sqlæ³¨å…¥ï¼Œæ‰€ä»¥å¯ä»¥è¿™æ ·å†™selectæ ‡ç­¾ä¸­çš„sqlè¯­å¥</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from user where username like &quot;%&quot;#&#123;v&#125;&quot;%&quot;</span><br></pre></td></tr></table></figure>
<p><img src="Mybatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80/7.png" alt="æµ‹è¯•ç»“æœ"><br>å¯ä»¥çœ‹åˆ°æ‰“å°ç»“æœä¸­æˆåŠŸå‡ºç°äº†å ä½ç¬¦ï¼Œå…¶å®æœ€ç»ˆçš„sqlè¯­å¥ç›¸å½“äº</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> username <span class="keyword">like</span> &quot;%&quot;<span class="string">&#x27;äº”&#x27;</span>&quot;%&quot; </span><br></pre></td></tr></table></figure>
<p>è¿™ç§å†™æ³•æ˜¯æ­£ç¡®çš„ï¼Œåªæ˜¯å¹³æ—¶å¾ˆå°‘è¿™ä¹ˆç”¨</p>
<h2 id="æ–°å¢æ•°æ®"><a href="#æ–°å¢æ•°æ®" class="headerlink" title="æ–°å¢æ•°æ®"></a>æ–°å¢æ•°æ®</h2><p>ä¹¦å†™sqlè¯­å¥</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ–°å¢ç”¨æˆ· --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;my.study.pojo.User&quot;</span>&gt;</span></span><br><span class="line">		insert into user (username,birthday,address,sex)</span><br><span class="line">		values</span><br><span class="line">		(#&#123;username&#125;,#&#123;birthday&#125;,#&#123;address&#125;,#&#123;sex&#125;)</span><br><span class="line">	<span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>#&#123;&#125;</code>ä¸­çš„å‚æ•°è¦å’Œ<code>User.java</code>ç±»ä¸­çš„å­—æ®µå¯¹åº”ï¼Œè¿™æ ·æ‰èƒ½çŸ¥é“ä¼ å‚æ˜¯å’Œå“ªä¸ªå­—æ®µå¯¹åº”</p>
<p>æµ‹è¯•ç±»:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ–°å¢ç”¨æˆ·</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testInsert</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="comment">//1.åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶</span></span><br><span class="line">		String resource = <span class="string">&quot;sqlMapConfig.xml&quot;</span>;</span><br><span class="line">		InputStream in = Resources.getResourceAsStream(resource);</span><br><span class="line">		<span class="comment">//2.åˆ›å»ºSqlSessionFactory</span></span><br><span class="line">		SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(in);</span><br><span class="line">		<span class="comment">//3.åˆ›å»ºSqlSession</span></span><br><span class="line">		SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">		<span class="comment">//4.æ‰§è¡ŒSqlè¯­å¥</span></span><br><span class="line">		User u = <span class="keyword">new</span> User();</span><br><span class="line">		u.setUsername(<span class="string">&quot;æé›·&quot;</span>);</span><br><span class="line">		u.setBirthday(<span class="keyword">new</span> Date());</span><br><span class="line">		u.setAddress(<span class="string">&quot;ç«æ˜Ÿ&quot;</span>);</span><br><span class="line">		u.setSex(<span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">		<span class="keyword">int</span> i =sqlSession.insert(<span class="string">&quot;user.insertUser&quot;</span>, u);	</span><br><span class="line">    sqlSession.commit();	</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­insertçš„è¿”å›å€¼ä¸ºintå‹ï¼Œè¡¨ç¤ºå½±å“çš„è¡Œæ•°.æ³¨æ„æœ€åè¦æäº¤äº‹åŠ¡æ‰èƒ½æˆåŠŸæ’å…¥.<br><img src="Mybatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80/8.png" alt="æµ‹è¯•ç»“æœ"></p>
<h2 id="æ–°å¢æ•°æ®åè¿”å›ä¸»é”®ID"><a href="#æ–°å¢æ•°æ®åè¿”å›ä¸»é”®ID" class="headerlink" title="æ–°å¢æ•°æ®åè¿”å›ä¸»é”®ID"></a>æ–°å¢æ•°æ®åè¿”å›ä¸»é”®ID</h2><p>å¦‚æœæƒ³å®ç°åœ¨æ–°å¢å®Œç”¨æˆ·åç«‹åˆ»è¿”å›è¿™æ¡æ–°å¢æ•°æ®çš„ä¸»é”®ï¼Œåˆ™éœ€è¦åœ¨<code>&lt;insert&gt;</code>è¯­å¥ä¸­å†åµŒå¥—ä¸€å±‚<code>&lt;selectKey&gt;</code>ç”¨æ¥æŸ¥è¯¢ä¸»é”®.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Integer&quot;</span> <span class="attr">order</span>=<span class="string">&quot;AFTER&quot;</span>&gt;</span></span><br><span class="line">	select LAST_INSERT_ID()</span><br><span class="line"><span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>keyProperty</code>è¡¨ç¤ºè¿”å›å€¼ä¸º<code>User</code>çš„<code>id</code>å±æ€§ï¼Œ<code>resultType</code>è¡¨ç¤ºç±»å‹æ˜¯Integerå‹;<br>æ³¨æ„ï¼šåœ¨sqlä¸­ï¼Œå¦‚æœä¸»é”®æ˜¯è‡ªå¢çš„intå‹ï¼Œé‚£ä¹ˆä¸»é”®æ˜¯åœ¨æ•°æ®æ’å…¥å®Œæˆåå†ç”Ÿæˆä¸»é”®;å¦‚æœä¸æ˜¯è‡ªå¢ç±»å‹ï¼Œæ¯”å¦‚å¦‚æœæ˜¯varcharç±»å‹ï¼Œåˆ™ä¼šå…ˆæ’å…¥ä¸»é”®ï¼Œå†æ’å…¥æ•°æ®ã€‚<br><code>order</code>è¡¨ç¤ºæ‰§è¡Œé¡ºåº,æ‰€ä»¥è¿™é‡Œè¦ç”¨<code>AFTER</code><br>å…¶ä¸­</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> LAST_INSERT_ID()</span><br></pre></td></tr></table></figure>
<p>æ˜¯ç”±sqlæä¾›çš„æŸ¥è¯¢è¯­å¥ï¼Œå®ƒè·Ÿåœ¨insertè¯­å¥åé¢çš„è¯ï¼Œä¼šè¿”å›åˆšæ’å…¥çš„æ•°æ®çš„ä¸»é”®,æ¯”å¦‚:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> ....</span><br><span class="line"><span class="keyword">select</span> LAST_INSERT_ID()</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„æµ‹è¯•ç±»ä¸­æ·»åŠ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(u.getId());</span><br></pre></td></tr></table></figure>
<p>å³å¯æŸ¥çœ‹åˆ°å·²ç»è·å–åˆ°æœ€æ–°æ’å…¥çš„ä¸»é”®ID<br><img src="Mybatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80/9.png" alt="æµ‹è¯•ç»“æœ"></p>
<h2 id="ä¿®æ”¹-æ›´æ–°æ•°æ®"><a href="#ä¿®æ”¹-æ›´æ–°æ•°æ®" class="headerlink" title="ä¿®æ”¹/æ›´æ–°æ•°æ®"></a>ä¿®æ”¹/æ›´æ–°æ•°æ®</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ›´æ–° --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;my.study.pojo.User&quot;</span>&gt;</span></span><br><span class="line">		update user</span><br><span class="line">		set username = #&#123;username&#125;,sex =#&#123;sex&#125;,address = #&#123;address&#125;,birthday = #&#123;birthday&#125;</span><br><span class="line">		where id =#&#123;id&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ›´æ–°ç”¨æˆ·</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="comment">//1.åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶</span></span><br><span class="line">		String resource = <span class="string">&quot;sqlMapConfig.xml&quot;</span>;</span><br><span class="line">		InputStream in = Resources.getResourceAsStream(resource);</span><br><span class="line">		<span class="comment">//2.åˆ›å»ºSqlSessionFactory</span></span><br><span class="line">		SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(in);</span><br><span class="line">		<span class="comment">//3.åˆ›å»ºSqlSession</span></span><br><span class="line">		SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">		<span class="comment">//4.æ‰§è¡ŒSqlè¯­å¥</span></span><br><span class="line">		User u = <span class="keyword">new</span> User();</span><br><span class="line">		u.setId(<span class="number">29</span>);</span><br><span class="line">		u.setUsername(<span class="string">&quot;æé›·update&quot;</span>);</span><br><span class="line">		u.setBirthday(<span class="keyword">new</span> Date());</span><br><span class="line">		u.setAddress(<span class="string">&quot;ç«æ˜Ÿupdate&quot;</span>);</span><br><span class="line">		u.setSex(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">		<span class="keyword">int</span> i =sqlSession.update(<span class="string">&quot;user.updateUserById&quot;</span>, u);</span><br><span class="line">		sqlSession.commit();</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p><img src="Mybatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80/10.png" alt="æµ‹è¯•ç»“æœ"><br><img src="Mybatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80/11.png" alt="æµ‹è¯•ç»“æœ"></p>
<h2 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åˆ é™¤ --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Integer&quot;</span>&gt;</span></span><br><span class="line">		delete from user</span><br><span class="line">		where id = #&#123;id&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ é™¤ç”¨æˆ·</span></span><br><span class="line">		<span class="meta">@Test</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testdelete</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">			<span class="comment">//1.åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶</span></span><br><span class="line">			String resource = <span class="string">&quot;sqlMapConfig.xml&quot;</span>;</span><br><span class="line">			InputStream in = Resources.getResourceAsStream(resource);</span><br><span class="line">			<span class="comment">//2.åˆ›å»ºSqlSessionFactory</span></span><br><span class="line">			SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(in);</span><br><span class="line">			<span class="comment">//3.åˆ›å»ºSqlSession</span></span><br><span class="line">			SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">			<span class="comment">//4.æ‰§è¡ŒSqlè¯­å¥			</span></span><br><span class="line">			<span class="keyword">int</span> d = sqlSession.delete(<span class="string">&quot;user.deleteUserById&quot;</span>, <span class="number">29</span>);</span><br><span class="line">			sqlSession.commit();</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>
<p><img src="Mybatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80/12.png" alt="æµ‹è¯•ç»“æœ"><br><img src="Mybatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80/13.png" alt="æµ‹è¯•ç»“æœ"></p>
<h1 id="MapperåŠ¨æ€ä»£ç†å¼€å‘"><a href="#MapperåŠ¨æ€ä»£ç†å¼€å‘" class="headerlink" title="MapperåŠ¨æ€ä»£ç†å¼€å‘"></a>MapperåŠ¨æ€ä»£ç†å¼€å‘</h1><p>ä½¿ç”¨åŠ¨æ€ä»£ç†æ–¹å¼ï¼ŒåŠ¨æ€ç”Ÿæˆä»£ç ï¼Œé¿å…ä¹¦å†™é‡å¤ä»£ç .<br>åŸå§‹Daoå¼€å‘ä¸­å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š<br>Daoæ–¹æ³•ä½“å­˜åœ¨é‡å¤ä»£ç ï¼šé€šè¿‡SqlSessionFactoryåˆ›å»ºSqlSessionï¼Œè°ƒç”¨SqlSessionçš„æ•°æ®åº“æ“ä½œæ–¹æ³•<br>è°ƒç”¨sqlSessionçš„æ•°æ®åº“æ“ä½œæ–¹æ³•éœ€è¦æŒ‡å®šstatementçš„idï¼Œè¿™é‡Œå­˜åœ¨ç¡¬ç¼–ç ï¼Œä¸ä¾¿äºå¼€å‘ç»´æŠ¤ã€‚</p>
<p>Mapperæ¥å£å¼€å‘æ–¹æ³•åªéœ€è¦ç¨‹åºå‘˜ç¼–å†™Mapperæ¥å£ï¼ˆç›¸å½“äºDaoæ¥å£ï¼‰ï¼Œç”±Mybatisæ¡†æ¶æ ¹æ®æ¥å£å®šä¹‰åˆ›å»ºæ¥å£çš„åŠ¨æ€ä»£ç†å¯¹è±¡ã€‚</p>
<p>Mapperæ¥å£å¼€å‘éœ€è¦éµå¾ªä»¥ä¸‹è§„èŒƒï¼š<br>1ã€Mapper.xmlæ–‡ä»¶ä¸­çš„namespaceä¸mapperæ¥å£çš„ç±»è·¯å¾„ç›¸åŒã€‚<br>2ã€Mapperæ¥å£æ–¹æ³•åå’ŒMapper.xmlä¸­å®šä¹‰çš„æ¯ä¸ªstatementçš„idç›¸åŒ<br>3ã€Mapperæ¥å£æ–¹æ³•çš„è¾“å…¥å‚æ•°ç±»å‹å’Œmapper.xmlä¸­å®šä¹‰çš„æ¯ä¸ªsql çš„parameterTypeçš„ç±»å‹ç›¸åŒ<br>4ã€Mapperæ¥å£æ–¹æ³•çš„è¾“å‡ºå‚æ•°ç±»å‹å’Œmapper.xmlä¸­å®šä¹‰çš„æ¯ä¸ªsqlçš„resultTypeçš„ç±»å‹ç›¸åŒ</p>
<p>è¿™é‡Œå®šä¹‰ä¸€ä¸ª<code>UserMapper</code>æ¥å£:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> my.study.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> my.study.pojo.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">	<span class="comment">//éµå¾ªå››ä¸ªåŸåˆ™</span></span><br><span class="line">	<span class="comment">//æ¥å£æ–¹æ³•å == User.xml ä¸­çš„ idå</span></span><br><span class="line">	<span class="comment">//è¿”å›å€¼ç±»å‹ ä¸ User.xmlæ–‡ä»¶ä¸­è¿”å›å€¼çš„ç±»å‹ä¸€è‡´</span></span><br><span class="line">	<span class="comment">//æ–¹æ³•çš„å…¥å‚ç±»å‹ä¸User.xmlä¸­å…¥å‚çš„ç±»å‹ä¸€è‡´</span></span><br><span class="line">	<span class="comment">//mapperæ ‡ç­¾çš„å‘½åç©ºé—´ç»‘å®šæ­¤æ¥å£</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> User <span class="title">findUserById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‘½åç©ºé—´ä¸æ¥å£ç»‘å®šï¼š<br><img src="Mybatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80/14.png" alt="å‘½åç©ºé—´ä¸æ¥å£ç»‘å®š"></p>
<p>ä¹¦å†™æµ‹è¯•ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> my.study.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> my.study.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> my.study.pojo.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisMapperTest</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">		<span class="comment">//1.åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶</span></span><br><span class="line">		String resource = <span class="string">&quot;sqlMapConfig.xml&quot;</span>;</span><br><span class="line">		InputStream in = Resources.getResourceAsStream(resource);</span><br><span class="line">		<span class="comment">//2.åˆ›å»ºSqlSessionFactory</span></span><br><span class="line">		SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(in);</span><br><span class="line">		<span class="comment">//3.åˆ›å»ºSqlSession</span></span><br><span class="line">		SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">		<span class="comment">//4.SqlSessionæ ¹æ®æ¥å£ç”Ÿæˆä¸€ä¸ªå®ç°ç±»</span></span><br><span class="line">		UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">		</span><br><span class="line">		User user = mapper.findUserById(<span class="number">10</span>);</span><br><span class="line">		System.out.println(user);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="Mybatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80/15.png" alt="æµ‹è¯•ç»“æœ"></p>
<p>è¿™æ ·ä½¿ç”¨åŠ¨æ€å¼€å‘ï¼Œåªéœ€è¦ä¹¦å†™ä¸€ä¸ªæ¥å£å’Œä¸€ä¸ªmapper.xmlé…ç½®æ–‡ä»¶å°±å¯ä»¥äº†.</p>
<h1 id="Mybatisç›¸æ¯”äºJDBCçš„ä¼˜ç‚¹"><a href="#Mybatisç›¸æ¯”äºJDBCçš„ä¼˜ç‚¹" class="headerlink" title="Mybatisç›¸æ¯”äºJDBCçš„ä¼˜ç‚¹"></a>Mybatisç›¸æ¯”äºJDBCçš„ä¼˜ç‚¹</h1><p>1ã€æ•°æ®åº“è¿æ¥åˆ›å»ºã€é‡Šæ”¾é¢‘ç¹é€ æˆç³»ç»Ÿèµ„æºæµªè´¹ä»è€Œå½±å“ç³»ç»Ÿæ€§èƒ½ï¼Œå¦‚æœä½¿ç”¨æ•°æ®åº“è¿æ¥æ± å¯è§£å†³æ­¤é—®é¢˜ã€‚<br>è§£å†³ï¼šåœ¨SqlMapConfig.xmlä¸­é…ç½®æ•°æ®è¿æ¥æ± ï¼Œä½¿ç”¨è¿æ¥æ± ç®¡ç†æ•°æ®åº“é“¾æ¥ã€‚<br>2ã€Sqlè¯­å¥å†™åœ¨ä»£ç ä¸­é€ æˆä»£ç ä¸æ˜“ç»´æŠ¤ï¼Œå®é™…åº”ç”¨sqlå˜åŒ–çš„å¯èƒ½è¾ƒå¤§ï¼Œsqlå˜åŠ¨éœ€è¦æ”¹å˜javaä»£ç ã€‚<br>è§£å†³ï¼šå°†Sqlè¯­å¥é…ç½®åœ¨XXXXmapper.xmlæ–‡ä»¶ä¸­ä¸javaä»£ç åˆ†ç¦»ã€‚<br>3ã€å‘sqlè¯­å¥ä¼ å‚æ•°éº»çƒ¦ï¼Œå› ä¸ºsqlè¯­å¥çš„whereæ¡ä»¶ä¸ä¸€å®šï¼Œå¯èƒ½å¤šä¹Ÿå¯èƒ½å°‘ï¼Œå ä½ç¬¦éœ€è¦å’Œå‚æ•°ä¸€ä¸€å¯¹åº”ã€‚<br>è§£å†³ï¼šMybatisè‡ªåŠ¨å°†javaå¯¹è±¡æ˜ å°„è‡³sqlè¯­å¥ï¼Œé€šè¿‡statementä¸­çš„parameterTypeå®šä¹‰è¾“å…¥å‚æ•°çš„ç±»å‹ã€‚<br>4ã€å¯¹ç»“æœé›†è§£æéº»çƒ¦ï¼Œsqlå˜åŒ–å¯¼è‡´è§£æä»£ç å˜åŒ–ï¼Œä¸”è§£æå‰éœ€è¦éå†ï¼Œå¦‚æœèƒ½å°†æ•°æ®åº“è®°å½•å°è£…æˆpojoå¯¹è±¡è§£ææ¯”è¾ƒæ–¹ä¾¿ã€‚<br>è§£å†³ï¼šMybatisè‡ªåŠ¨å°†sqlæ‰§è¡Œç»“æœæ˜ å°„è‡³javaå¯¹è±¡ï¼Œé€šè¿‡statementä¸­çš„resultTypeå®šä¹‰è¾“å‡ºç»“æœçš„ç±»å‹ã€‚</p>
<h1 id="Mybatiså’ŒHibernateåŒºåˆ«"><a href="#Mybatiså’ŒHibernateåŒºåˆ«" class="headerlink" title="Mybatiså’ŒHibernateåŒºåˆ«"></a>Mybatiså’ŒHibernateåŒºåˆ«</h1><p>Mybatiså’Œhibernateä¸åŒï¼Œå®ƒä¸å®Œå…¨æ˜¯ä¸€ä¸ªORMæ¡†æ¶ï¼Œå› ä¸º<code>MyBatiséœ€è¦ç¨‹åºå‘˜è‡ªå·±ç¼–å†™Sqlè¯­å¥</code>ã€‚mybatiså¯ä»¥é€šè¿‡XMLæˆ–æ³¨è§£æ–¹å¼çµæ´»é…ç½®è¦è¿è¡Œçš„sqlè¯­å¥ï¼Œå¹¶å°†javaå¯¹è±¡å’Œsqlè¯­å¥æ˜ å°„ç”Ÿæˆæœ€ç»ˆæ‰§è¡Œçš„sqlï¼Œæœ€åå°†sqlæ‰§è¡Œçš„ç»“æœå†æ˜ å°„ç”Ÿæˆjavaå¯¹è±¡ã€‚</p>
<p>Mybatiså­¦ä¹ é—¨æ§›ä½ï¼Œç®€å•æ˜“å­¦ï¼Œç¨‹åºå‘˜ç›´æ¥ç¼–å†™åŸç”Ÿæ€sqlï¼Œå¯ä¸¥æ ¼æ§åˆ¶sqlæ‰§è¡Œæ€§èƒ½ï¼Œçµæ´»åº¦é«˜ï¼Œéå¸¸é€‚åˆå¯¹å…³ç³»æ•°æ®æ¨¡å‹è¦æ±‚ä¸é«˜çš„è½¯ä»¶å¼€å‘ï¼Œä¾‹å¦‚äº’è”ç½‘è½¯ä»¶ã€ä¼ä¸šè¿è¥ç±»è½¯ä»¶ç­‰ï¼Œå› ä¸ºè¿™ç±»è½¯ä»¶éœ€æ±‚å˜åŒ–é¢‘ç¹ï¼Œä¸€ä½†éœ€æ±‚å˜åŒ–è¦æ±‚æˆæœè¾“å‡ºè¿…é€Ÿã€‚ä½†æ˜¯çµæ´»çš„å‰ææ˜¯<code>mybatisæ— æ³•åšåˆ°æ•°æ®åº“æ— å…³æ€§</code>ï¼Œå¦‚æœéœ€è¦å®ç°æ”¯æŒå¤šç§æ•°æ®åº“çš„è½¯ä»¶åˆ™éœ€è¦è‡ªå®šä¹‰å¤šå¥—sqlæ˜ å°„æ–‡ä»¶ï¼Œå·¥ä½œé‡å¤§ã€‚</p>
<p>Hibernateå¯¹è±¡/å…³ç³»æ˜ å°„èƒ½åŠ›å¼ºï¼Œ<code>æ•°æ®åº“æ— å…³æ€§å¥½</code>ï¼Œå¯¹äºå…³ç³»æ¨¡å‹è¦æ±‚é«˜çš„è½¯ä»¶ï¼ˆä¾‹å¦‚éœ€æ±‚å›ºå®šçš„å®šåˆ¶åŒ–è½¯ä»¶ï¼‰å¦‚æœç”¨hibernateå¼€å‘å¯ä»¥èŠ‚çœå¾ˆå¤šä»£ç ï¼Œæé«˜æ•ˆç‡ã€‚ä½†æ˜¯Hibernateçš„å­¦ä¹ é—¨æ§›é«˜ï¼Œè¦ç²¾é€šé—¨æ§›æ›´é«˜ï¼Œè€Œä¸”æ€ä¹ˆè®¾è®¡O/Ræ˜ å°„ï¼Œåœ¨æ€§èƒ½å’Œå¯¹è±¡æ¨¡å‹ä¹‹é—´å¦‚ä½•æƒè¡¡ï¼Œä»¥åŠæ€æ ·ç”¨å¥½Hibernateéœ€è¦å…·æœ‰å¾ˆå¼ºçš„ç»éªŒå’Œèƒ½åŠ›æ‰è¡Œã€‚</p>

  <p><a class="classtest-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">å­¦ä¹ ç¬”è®°</a> â€” Nov 19, 2018</p>
  


        </div>
        <div class="row mt-2">
  <h3>Search</h3>
  <div><input id="search-text" title="search" class="search-text" type="text" placeholder="search......"></div>
  <div style="margin-top: 1.5rem;">
    <ul id="result"></ul>
  </div>
</div>
        <div class="row mt-2">
  
    <div class="eight columns">
      <p id="madewith">Made with â¤ and
        <a class="footer-link icon" href="https://hexo.io" target="_blank" style="text-decoration: none;" rel="noreferrer" aria-label="Hexo.io">
        <svg class="hexo svg-hov" width="14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>Hexo.js</title><path d="M12 .007L1.57 6.056V18.05L12 23.995l10.43-6.049V5.952L12 .007zm4.798 17.105l-.939.521-.939-.521V12.94H9.08v4.172l-.94.521-.938-.521V6.89l.939-.521.939.521v4.172h5.84V6.89l.94-.521.938.521v10.222z"/></svg>
        </a>
        
        at <a href="https://en.wikipedia.org/wiki/Earth" target="_blank" rel="noreferrer">Earth</a>.</p>
        
    </div>

    <!-- Sepcial thanks to https://simpleicons.org/ for the icons -->
    <div class="four columns mb-3 posisi" >
      
      <a class="ml-0 footer-link icon" href="https://github.com/homxuwang" target="_blank" style="text-decoration: none" rel="noreferrer" aria-label="GitHub">
        <svg class="github svg-hov" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
      </a>
      

      

      

      

      

    </div>
  
</div>

      </div>

    </div>

  </div>
  <script src="/js/nanobar.min.js"></script>

  <script>
    var options = {
      classname: 'nanobar',
      id: 'myNanobar'
    };
    var nanobar = new Nanobar(options);
    nanobar.go(30);
    nanobar.go(76);
    nanobar.go(100);
  </script>

</body>

</html>