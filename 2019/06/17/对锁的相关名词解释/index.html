<!DOCTYPE html>
<html lang="zh-Hans">

<head>

  <!-- Minima -->
  <!-- Hexo theme created by @adisaktijrs -->

  <!-- Basic Page Needs
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <meta charset="utf-8">

  
  <title>å¯¹[é”]çš„ç›¸å…³åè¯è§£é‡Š</title>
  
  <link rel="canonical" href="http://homxuwang.github.io/2019/06/17/%E5%AF%B9%E9%94%81%E7%9A%84%E7%9B%B8%E5%85%B3%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A/">
  
  <meta name="description" content="å…¬å¹³é”/éå…¬å¹³é”åŸºæœ¬æ¦‚å¿µï¼šå…¬å¹³é”(Fair)ï¼šæ˜¯æŒ‡æŒ‰ç…§çº¿ç¨‹ç”³è¯·çš„é¡ºåºè·å–é”ã€‚åŠ é”å‰æ£€æŸ¥æ˜¯å¦æœ‰æ’é˜Ÿç­‰å¾…çš„çº¿ç¨‹ï¼Œä¼˜å…ˆæ’é˜Ÿç­‰å¾…çš„çº¿ç¨‹ï¼Œå…ˆæ¥å…ˆå¾—ã€‚éå…¬å¹³é”(Nonfair):æ˜¯æŒ‡ä¸æ˜¯æŒ‰ç…§çº¿ç¨‹ç”³è¯·çš„é¡ºåºè·å–é”ï¼Œæœ‰å¯èƒ½åç”³è¯·çš„çº¿ç¨‹åè€Œå…ˆè·å–åˆ°é”ï¼Œå‡å¦‚å…ˆæ¥çš„çº¿ç¨‹ä¸€ç›´è·å–ä¸åˆ°é”ï¼Œä¼šé€ æˆé”é¥¥é¥¿ç°è±¡ã€‚å³åŠ é”æ—¶ä¸è€ƒè™‘æ’é˜Ÿ">
  
  
  <meta name="author" content="homxuwang">
  
  
  
  <meta property="og:site_name" content="Homxu" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="å¯¹[é”]çš„ç›¸å…³åè¯è§£é‡Š" />
  
  <meta property="og:description" content="å…¬å¹³é”/éå…¬å¹³é”åŸºæœ¬æ¦‚å¿µï¼šå…¬å¹³é”(Fair)ï¼šæ˜¯æŒ‡æŒ‰ç…§çº¿ç¨‹ç”³è¯·çš„é¡ºåºè·å–é”ã€‚åŠ é”å‰æ£€æŸ¥æ˜¯å¦æœ‰æ’é˜Ÿç­‰å¾…çš„çº¿ç¨‹ï¼Œä¼˜å…ˆæ’é˜Ÿç­‰å¾…çš„çº¿ç¨‹ï¼Œå…ˆæ¥å…ˆå¾—ã€‚éå…¬å¹³é”(Nonfair):æ˜¯æŒ‡ä¸æ˜¯æŒ‰ç…§çº¿ç¨‹ç”³è¯·çš„é¡ºåºè·å–é”ï¼Œæœ‰å¯èƒ½åç”³è¯·çš„çº¿ç¨‹åè€Œå…ˆè·å–åˆ°é”ï¼Œå‡å¦‚å…ˆæ¥çš„çº¿ç¨‹ä¸€ç›´è·å–ä¸åˆ°é”ï¼Œä¼šé€ æˆé”é¥¥é¥¿ç°è±¡ã€‚å³åŠ é”æ—¶ä¸è€ƒè™‘æ’é˜Ÿ">
  
  <meta property="og:url" content="http://homxuwang.github.io/2019/06/17/%E5%AF%B9%E9%94%81%E7%9A%84%E7%9B%B8%E5%85%B3%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A/" />

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="å¯¹[é”]çš„ç›¸å…³åè¯è§£é‡Š">
  
  <meta name="twitter:description" content="å…¬å¹³é”/éå…¬å¹³é”åŸºæœ¬æ¦‚å¿µï¼šå…¬å¹³é”(Fair)ï¼šæ˜¯æŒ‡æŒ‰ç…§çº¿ç¨‹ç”³è¯·çš„é¡ºåºè·å–é”ã€‚åŠ é”å‰æ£€æŸ¥æ˜¯å¦æœ‰æ’é˜Ÿç­‰å¾…çš„çº¿ç¨‹ï¼Œä¼˜å…ˆæ’é˜Ÿç­‰å¾…çš„çº¿ç¨‹ï¼Œå…ˆæ¥å…ˆå¾—ã€‚éå…¬å¹³é”(Nonfair):æ˜¯æŒ‡ä¸æ˜¯æŒ‰ç…§çº¿ç¨‹ç”³è¯·çš„é¡ºåºè·å–é”ï¼Œæœ‰å¯èƒ½åç”³è¯·çš„çº¿ç¨‹åè€Œå…ˆè·å–åˆ°é”ï¼Œå‡å¦‚å…ˆæ¥çš„çº¿ç¨‹ä¸€ç›´è·å–ä¸åˆ°é”ï¼Œä¼šé€ æˆé”é¥¥é¥¿ç°è±¡ã€‚å³åŠ é”æ—¶ä¸è€ƒè™‘æ’é˜Ÿ">
  
  
  
  
  <meta name="twitter:url" content="http://homxuwang.github.io/2019/06/17/%E5%AF%B9%E9%94%81%E7%9A%84%E7%9B%B8%E5%85%B3%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A/" />

  <!-- Mobile Specific Metas
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Preload fonts
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <link rel="preload" href="/fonts/dm-serif-display-v4-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/fonts/inter-v2-latin-regular.woff2" as="font" type="font/woff2" crossorigin>

  <!-- CSS
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  
<link rel="stylesheet" href="/css/normalize.css">

  
<link rel="stylesheet" href="/css/skeleton.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
<link rel="stylesheet" href="/css/prism-dark.css">

  
<link rel="stylesheet" href="/css/prism-line-numbers.css">

  <!-- User css -->
  
  
<link rel="stylesheet" href="/css/user.css">

  

  <!-- Favicon
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <link rel="icon" type="image/png" href="/images/favicon.png">

  <!-- Custom Theme Color Style
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <style>
  a:not(.icon) {
    text-decoration-color: #0FA0CE;
    background-image: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0) 50%,
      #0FA0CE 50%
    );
  }
  blockquote {
    border-left: 8px solid #0FA0CE;
  }
  .nanobar .bar {
    background: #0FA0CE;
  }
  .button.button-primary:hover,
  button.button-primary:hover,
  input[type="submit"].button-primary:hover,
  input[type="reset"].button-primary:hover,
  input[type="button"].button-primary:hover,
  .button.button-primary:focus,
  button.button-primary:focus,
  input[type="submit"].button-primary:focus,
  input[type="reset"].button-primary:focus,
  input[type="button"].button-primary:focus {
    background-color: #0FA0CE;
    border-color: #0FA0CE;
  }
  input[type="email"]:focus,
  input[type="number"]:focus,
  input[type="search"]:focus,
  input[type="text"]:focus,
  input[type="tel"]:focus,
  input[type="url"]:focus,
  input[type="password"]:focus,
  textarea:focus,
  select:focus {
    border: 1px solid #0FA0CE;
  }
</style>

  <!-- Google Analytics (With Privacy Settings On)
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  

  
  <script src="/js/pic.min.js" defer></script>
  

  
  <script src="/js/search.min.js" defer></script>
  

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div class="container">
    <div class="row">
      <div>

        <div class="row">
  <div class="two columns" style="max-width: 50px">
    <h1 class="mt-2 mode">
      <div onclick=setDarkMode(true) id="darkBtn">ğŸŒ‘</div>
      <div onclick=setDarkMode(false) id="lightBtn" class=hidden>â˜€ï¸</div>
      <script >
        if (localStorage.getItem('preferredTheme') == 'dark') {
          setDarkMode(true)
        }
        function setDarkMode(isDark) {
          var darkBtn = document.getElementById('darkBtn')
          var lightBtn = document.getElementById('lightBtn')
          if (isDark) {
            lightBtn.style.display = "block"
            darkBtn.style.display = "none"
            localStorage.setItem('preferredTheme', 'dark');
          } else {
            lightBtn.style.display = "none"
            darkBtn.style.display = "block"
            localStorage.removeItem('preferredTheme');
          }
          document.body.classList.toggle("darkmode");
        }
      </script>
    </h1>
  </div>

  <div class="six columns ml-1">
    <h1 class="mt-2">
      Hi July.HX
    </h1>
  </div>

  <div class="twelve columns">
    <div class="row">
      <div class="nine columns left">
        <a href="/">Home</a>
        
        
      </div>
    </div>
    <hr style="margin-bottom: 2.6rem">
  </div>
</div>

        <div class="trans">
            <h2>å¯¹[é”]çš„ç›¸å…³åè¯è§£é‡Š</h2>

  <h1 id="å…¬å¹³é”-éå…¬å¹³é”"><a href="#å…¬å¹³é”-éå…¬å¹³é”" class="headerlink" title="å…¬å¹³é”/éå…¬å¹³é”"></a>å…¬å¹³é”/éå…¬å¹³é”</h1><p><strong>åŸºæœ¬æ¦‚å¿µ</strong>ï¼š<br><code>å…¬å¹³é”(Fair)</code>ï¼šæ˜¯æŒ‡æŒ‰ç…§çº¿ç¨‹ç”³è¯·çš„é¡ºåºè·å–é”ã€‚åŠ é”å‰æ£€æŸ¥æ˜¯å¦æœ‰æ’é˜Ÿç­‰å¾…çš„çº¿ç¨‹ï¼Œä¼˜å…ˆæ’é˜Ÿç­‰å¾…çš„çº¿ç¨‹ï¼Œå…ˆæ¥å…ˆå¾—ã€‚<br><code>éå…¬å¹³é”(Nonfair)</code>:æ˜¯æŒ‡ä¸æ˜¯æŒ‰ç…§çº¿ç¨‹ç”³è¯·çš„é¡ºåºè·å–é”ï¼Œæœ‰å¯èƒ½åç”³è¯·çš„çº¿ç¨‹åè€Œå…ˆè·å–åˆ°é”ï¼Œå‡å¦‚å…ˆæ¥çš„çº¿ç¨‹ä¸€ç›´è·å–ä¸åˆ°é”ï¼Œä¼šé€ æˆé”é¥¥é¥¿ç°è±¡ã€‚å³åŠ é”æ—¶ä¸è€ƒè™‘æ’é˜Ÿç­‰å¾…é—®é¢˜ï¼Œç›´æ¥å°è¯•è·å–é”ï¼Œè·å–ä¸åˆ°è‡ªåŠ¨åˆ°é˜Ÿå°¾ç­‰å¾…ã€‚</p>
<p>éå…¬å¹³é”æ€§èƒ½æ¯”å…¬å¹³é”é«˜5~10å€ï¼Œå› ä¸ºå…¬å¹³é”éœ€è¦åœ¨å¤šæ ¸çš„æƒ…å†µä¸‹ç»´æŠ¤ä¸€ä¸ªé˜Ÿåˆ—ã€‚</p>
<p>åœ¨Javaçš„ReentrantLockä¸­å¯ä»¥é€šè¿‡æ„é€ æ–¹æ³•æŒ‡å®šæ˜¯å¦ä¸ºå…¬å¹³é”ï¼Œé»˜è®¤çš„lock()æ–¹æ³•ä¸ºéå…¬å¹³é”ï¼Œéå…¬å¹³é”çš„ä¼˜ç‚¹åœ¨äºååé‡å¤§ã€‚</p>
<p>synchronizedå…³é”®å­—æ— æ³•æŒ‡å®šä¸ºå…¬å¹³é”ï¼Œä¸€ç›´éƒ½æ˜¯éå…¬å¹³é”ã€‚</p>
<p>çœ‹å…¬å¹³é”å’Œéå…¬å¹³é”çš„å®ä¾‹:</p>
<p>å…¬å¹³é”:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executor;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FairOrNonfair</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ReentrantLock lock;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FairOrNonfair</span><span class="params">(<span class="keyword">boolean</span> isFair)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        lock = <span class="keyword">new</span> ReentrantLock(isFair);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">serviceMethod</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            lock.lock();</span><br><span class="line">            System.out.println(<span class="string">&quot;ThreadName=&quot;</span></span><br><span class="line">                    +Thread.currentThread().getName() + <span class="string">&quot;è·å¾—é”å®š&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="keyword">final</span> FairOrNonfair fairOrNonfair = <span class="keyword">new</span> FairOrNonfair(<span class="keyword">true</span>);</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;æˆ‘è¿›æ¥äº†&quot;</span>+Thread.currentThread().getName());</span><br><span class="line">                fairOrNonfair.serviceMethod();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        ExecutorService exec = Executors.newCachedThreadPool();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">5</span> ; i ++)&#123;</span><br><span class="line">            exec.execute(thread);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        exec.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»“æœ:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">æˆ‘è¿›æ¥äº†pool-1-thread-2</span><br><span class="line">æˆ‘è¿›æ¥äº†pool-1-thread-5</span><br><span class="line">æˆ‘è¿›æ¥äº†pool-1-thread-4</span><br><span class="line">æˆ‘è¿›æ¥äº†pool-1-thread-3</span><br><span class="line">æˆ‘è¿›æ¥äº†pool-1-thread-1</span><br><span class="line">ThreadName=pool-1-thread-2è·å¾—é”å®š</span><br><span class="line">ThreadName=pool-1-thread-5è·å¾—é”å®š</span><br><span class="line">ThreadName=pool-1-thread-4è·å¾—é”å®š</span><br><span class="line">ThreadName=pool-1-thread-3è·å¾—é”å®š</span><br><span class="line">ThreadName=pool-1-thread-1è·å¾—é”å®š</span><br></pre></td></tr></table></figure>
<p>éå…¬å¹³é”ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executor;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FairOrNonfair</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ReentrantLock lock;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FairOrNonfair</span><span class="params">(<span class="keyword">boolean</span> isFair)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        lock = <span class="keyword">new</span> ReentrantLock(isFair);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">serviceMethod</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            lock.lock();</span><br><span class="line">            System.out.println(<span class="string">&quot;ThreadName=&quot;</span></span><br><span class="line">                    +Thread.currentThread().getName() + <span class="string">&quot;è·å¾—é”å®š&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="keyword">final</span> FairOrNonfair fairOrNonfair = <span class="keyword">new</span> FairOrNonfair(<span class="keyword">false</span>);</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;æˆ‘è¿›æ¥äº†&quot;</span>+Thread.currentThread().getName());</span><br><span class="line">                fairOrNonfair.serviceMethod();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        ExecutorService exec = Executors.newCachedThreadPool();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">5</span> ; i ++)&#123;</span><br><span class="line">            exec.execute(thread);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        exec.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">æˆ‘è¿›æ¥äº†pool-1-thread-2</span><br><span class="line">æˆ‘è¿›æ¥äº†pool-1-thread-5</span><br><span class="line">æˆ‘è¿›æ¥äº†pool-1-thread-4</span><br><span class="line">æˆ‘è¿›æ¥äº†pool-1-thread-3</span><br><span class="line">æˆ‘è¿›æ¥äº†pool-1-thread-1</span><br><span class="line">ThreadName=pool-1-thread-2è·å¾—é”å®š</span><br><span class="line">ThreadName=pool-1-thread-4è·å¾—é”å®š</span><br><span class="line">ThreadName=pool-1-thread-5è·å¾—é”å®š</span><br><span class="line">ThreadName=pool-1-thread-3è·å¾—é”å®š</span><br><span class="line">ThreadName=pool-1-thread-1è·å¾—é”å®š</span><br></pre></td></tr></table></figure>

<p>ä»ç»“æœå¯ä»¥çœ‹å‡º æ‰“å°æ˜¯æœ‰åºçš„ï¼Œæ’é˜Ÿåœ¨å‰é¢çš„çº¿ç¨‹ç›´æ¥è·å–é”ã€‚è¿™å°±æ˜¯å…¬å¹³é”ã€‚</p>
<p>è€Œå°†éå…¬å¹³é”çš„ç»“æœä¹Ÿå¾ˆæ˜¾è€Œæ˜“è§ï¼Œçº¿ç¨‹5å…ˆè¿›æ¥ï¼Œä½†æ˜¯çº¿ç¨‹4å´å…ˆå¾—åˆ°äº†é”ã€‚</p>
<p>çœ‹ä¸€ä¸‹éƒ¨åˆ†æºç :</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®šä¹‰æˆfinalå‹çš„æˆå‘˜å˜é‡ï¼Œåœ¨æ„é€ æ–¹æ³•ä¸­è¿›è¡Œåˆå§‹åŒ– </span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Sync sync;</span><br><span class="line"><span class="comment">//æ— å‚æ•°é»˜è®¤éå…¬å¹³é”</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ReentrantLock</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    sync = <span class="keyword">new</span> NonfairSync();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ ¹æ®å‚æ•°åˆå§‹åŒ–ä¸ºå…¬å¹³é”æˆ–è€…éå…¬å¹³é” </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ReentrantLock</span><span class="params">(<span class="keyword">boolean</span> fair)</span> </span>&#123;</span><br><span class="line">    sync = fair ? <span class="keyword">new</span> FairSync() : <span class="keyword">new</span> NonfairSync();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>çº¿ç¨‹åœ¨éå…¬å¹³é”æ¨¡å¼ä¸‹çš„ååé‡æ¯”å…¬å¹³é”æ¨¡å¼ä¸‹é«˜ï¼ŒåŸå› å¦‚ä¸‹ï¼š<br>éå…¬å¹³é”æ¨¡å¼ä¸‹ï¼Œå½“çº¿ç¨‹é‡Šæ”¾é”ä¹‹åï¼Œå¿«é€Ÿçš„é€šè¿‡Fasté€šé“å†æ¬¡è·å–é”ï¼Œå°±ç®—å½“å‰syncé˜Ÿåˆ—ä¸­æœ‰æ’é˜Ÿç­‰å¾…çš„çº¿ç¨‹ä¹Ÿä¼šè¢«å¿½ç•¥ã€‚è¿™ç§æ¨¡å¼ï¼Œå¯ä»¥ä¿è¯è¿›å…¥å’Œé€€å‡ºé”çš„ååé‡ï¼Œä½†æ˜¯syncé˜Ÿåˆ—ä¸­è¿‡æ—©æ’é˜Ÿçš„çº¿ç¨‹ä¼šä¸€ç›´å¤„äºé˜»å¡çŠ¶æ€ï¼Œé€ æˆâ€œé¥¥é¥¿â€åœºæ™¯ã€‚è€Œå…¬å¹³æ€§é”ï¼Œå°±æ˜¯åœ¨è°ƒç”¨ä¸­é¡¾åŠå½“å‰syncé˜Ÿåˆ—ä¸­çš„ç­‰å¾…èŠ‚ç‚¹ï¼ˆåºŸå¼ƒäº†Fasté€šé“ï¼‰ï¼Œä¹Ÿå°±æ˜¯ä»»æ„è¯·æ±‚éƒ½éœ€è¦æŒ‰ç…§syncé˜Ÿåˆ—ä¸­æ—¢æœ‰çš„é¡ºåºè¿›è¡Œï¼Œå…ˆåˆ°å…ˆå¾—ã€‚è¿™æ ·å¾ˆå¥½çš„ç¡®ä¿äº†å…¬å¹³æ€§ï¼Œååé‡å°±æ²¡æœ‰éå…¬å¹³çš„é”é«˜äº†ã€‚</p>
<h1 id="å¯é‡å…¥é”"><a href="#å¯é‡å…¥é”" class="headerlink" title="å¯é‡å…¥é”"></a>å¯é‡å…¥é”</h1><p>å¯é‡å…¥é”ï¼Œæ˜¯æŒ‡ä¸€ä¸ªçº¿ç¨‹è·å–é”ä¹‹åå†å°è¯•è·å–é”æ—¶ä¼šè‡ªåŠ¨è·å–é”ï¼Œå¯é‡å…¥é”çš„ä¼˜ç‚¹æ˜¯é¿å…æ­»é”ã€‚ä¹Ÿå°±æ˜¯è¯´å¯é‡å…¥é”æŒ‡çš„æ˜¯åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­å¯ä»¥å¤šæ¬¡è·å–åŒä¸€æŠŠé”ã€‚æ¯”å¦‚ä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œä¸€ä¸ªå¸¦é”çš„æ–¹æ³•ï¼Œä½†æ˜¯åœ¨è¯¥æ–¹æ³•ä¸­åˆè°ƒç”¨äº†å¦ä¸€ä¸ªéœ€è¦ç›¸åŒé”çš„æ–¹æ³•ï¼Œåˆ™è¯¥çº¿ç¨‹å¯ä»¥ç›´æ¥æ‰§è¡Œè°ƒç”¨çš„æ–¹æ³•ï¼Œè€Œæ— éœ€é‡æ–°è·å¾—é”ã€‚</p>
<p>å¦ä¸€ä¸ªé‡Šä¹‰ï¼šå¹¿ä¹‰ä¸Šçš„å¯é‡å…¥é”æŒ‡çš„æ˜¯å¯é‡å¤å¯é€’å½’è°ƒç”¨çš„é”(å› æ­¤ä¹Ÿå«é€’å½’é”)ï¼ŒæŒ‡çš„æ˜¯åŒä¸€çº¿ç¨‹ å¤–å±‚å‡½æ•°è·å¾—é”ä¹‹å ï¼Œå†…å±‚é€’å½’å‡½æ•°ä»ç„¶æœ‰è·å–è¯¥é”çš„ä»£ç ï¼Œä½†ä¸å—å½±å“ï¼Œå¹¶ä¸”ä¸å‘ç”Ÿæ­»é”ï¼ˆå‰æå¾—æ˜¯åŒä¸€ä¸ªå¯¹è±¡æˆ–è€…classï¼‰ï¼Œè¿™æ ·çš„é”å°±å«åšå¯é‡å…¥é”ã€‚â€”â€”<a target="_blank" rel="noopener" href="https://blog.csdn.net/rickiyeat/article/details/78314451">æ¥æº</a></p>
<p>ReentrantLockå’Œsychronizedéƒ½æ˜¯å¯é‡å…¥é”ã€‚</p>
<p>ä¸‹é¢çœ‹ä¸¤ä¸ªä¾‹å­ï¼š<br>ä¾‹1</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.reentrantlock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyReentrantLock</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getId());</span><br><span class="line">        set();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getId());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      get();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MyReentrantLock myLock = <span class="keyword">new</span> MyReentrantLock();</span><br><span class="line">        <span class="keyword">new</span> Thread(myLock).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(myLock).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(myLock).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰“å°ç»“æœ:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">12</span><br><span class="line">12</span><br><span class="line">14</span><br><span class="line">14</span><br><span class="line">13</span><br><span class="line">13</span><br></pre></td></tr></table></figure>

<p>ä¾‹2</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.reentrantlock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sun.awt.windows.ThemeReader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyReentrantLock2</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    ReentrantLock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        System.out.println(Thread.currentThread().getId());</span><br><span class="line">        set();</span><br><span class="line">        lock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        System.out.println(Thread.currentThread().getId());</span><br><span class="line">        lock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        get();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MyReentrantLock2 mrl2 = <span class="keyword">new</span> MyReentrantLock2();</span><br><span class="line">        <span class="keyword">new</span> Thread(mrl2).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(mrl2).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(mrl2).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰“å°ç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">12</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">14</span><br></pre></td></tr></table></figure>

<p>ä»å…¶æ‰“å°ç»“æœå¯è§ï¼Œç»“æœéƒ½æ˜¯æ­£ç¡®çš„ï¼Œå³åŒä¸€ä¸ªçº¿ç¨‹idè¢«è¿ç»­è¾“å‡ºäº†ä¸¤æ¬¡ã€‚</p>
<h1 id="ç‹¬äº«é”-å…±äº«é”"><a href="#ç‹¬äº«é”-å…±äº«é”" class="headerlink" title="ç‹¬äº«é”/å…±äº«é”"></a>ç‹¬äº«é”/å…±äº«é”</h1><p>ç‹¬äº«é”ï¼Œæ˜¯æŒ‡é”ä¸€æ¬¡åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹æŒæœ‰ã€‚</p>
<p>å…±äº«é”ï¼Œæ˜¯æŒ‡é”ä¸€æ¬¡å¯ä»¥è¢«å¤šä¸ªçº¿ç¨‹æŒæœ‰ã€‚ä»å­—é¢æ¥çœ‹ä¹Ÿå³æ˜¯å…è®¸å¤šä¸ªçº¿ç¨‹å…±åŒè®¿é—®èµ„æºã€‚</p>
<p>ReentrantLockå’Œsynchronizedéƒ½æ˜¯ç‹¬äº«é”ï¼ŒReadWriteLockçš„è¯»é”æ˜¯å…±äº«é”ï¼Œå†™é”æ˜¯ç‹¬äº«é”ã€‚</p>
<p>è¯»é”çš„å…±äº«é”å¯ä¿è¯å¹¶å‘è¯»æ˜¯éå¸¸é«˜æ•ˆçš„ï¼Œè¯»å†™ï¼Œå†™è¯» ï¼Œå†™å†™çš„è¿‡ç¨‹æ˜¯äº’æ–¥çš„ã€‚</p>
<p>ç‹¬äº«é”ä¸å…±äº«é”ä¹Ÿæ˜¯é€šè¿‡AQSæ¥å®ç°çš„ï¼Œé€šè¿‡å®ç°ä¸åŒçš„æ–¹æ³•ï¼Œæ¥å®ç°ç‹¬äº«æˆ–è€…å…±äº«ã€‚</p>
<h2 id="AQS"><a href="#AQS" class="headerlink" title="AQS"></a>AQS</h2><p>æŠ½è±¡é˜Ÿåˆ—åŒæ­¥å™¨(AbstractQueuedSynchronizerï¼Œç®€ç§°AQS)æ˜¯ç”¨æ¥æ„å»ºé”æˆ–è€…å…¶ä»–åŒæ­¥ç»„ä»¶çš„åŸºç¡€æ¡†æ¶ï¼Œå®ƒä½¿ç”¨ä¸€ä¸ªæ•´å‹çš„volatileå˜é‡(å‘½åä¸ºstate)æ¥ç»´æŠ¤åŒæ­¥çŠ¶æ€ï¼Œé€šè¿‡å†…ç½®çš„FIFOé˜Ÿåˆ—æ¥å®Œæˆèµ„æºè·å–çº¿ç¨‹çš„æ’é˜Ÿå·¥ä½œã€‚</p>
<div class="mxgraph" style="max-width:100%;border:1px solid transparent;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;nav&quot;:true,&quot;resize&quot;:true,&quot;toolbar&quot;:&quot;zoom layers lightbox&quot;,&quot;edit&quot;:&quot;_blank&quot;,&quot;xml&quot;:&quot;&lt;mxfile modified=\&quot;2019-06-24T13:47:23.490Z\&quot; host=\&quot;www.draw.io\&quot; agent=\&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.131 Safari/537.36\&quot; etag=\&quot;fjj5M5kb-boEBnH1tqUW\&quot; version=\&quot;10.8.0\&quot; type=\&quot;google\&quot;&gt;&lt;diagram id=\&quot;gehmCrj4xDMhfWEZgMNG\&quot; name=\&quot;ç¬¬ 1 é¡µ\&quot;&gt;tVbbjpswEP0aP0YCkhD7ERLSSm2lVlHV7iMBB1AcnBrn1q/vDDYQFiJltd2XZHzm4pkzIw9kujxcP6n4mH+TKRfEc9Irma6I59GZA78I3Aww8z0DZKpIDeR2wKb4yy1o/bJTkfKqZ6ilFLo49sFEliVPdA+LlZKXvtlOiv6txzjjA2CTxGKI/ipSnduyvEWHf+ZFljc3uz4zmkPcGNtKqjxO5eUOmkZkulRSaiMdrksukLuGF+O3fqBtE1O81M84qI142X/5uTt9z8vf6eTlVrnziT8zYc6xONmKiecLCBjqeAskeM5WqpSrWuf/OWG2oduJYHBpeWn1DqQy7xlV+mYpbUDrFoCysXeMbW4JHVGZZCaJFCI+VtzYtKe7C/3M/ptathIG8DWoBkiKUyOKrOxlmgDDXI1EjxgJQsIoieYESKEeiRYohG1EaAcGfdc1X2WyBzk+HOFQbqujoWIAQRLMIXRJIp8EKxLMawRSpE95MywkrMMELmGRRdgaEQrC4okw0ZUnJy3Vk/mGjIR+HX9NmFtfHSF4l/hjGhEctvD9TZ1jzWGAvQQiqPMhTQ1+bMY4Qs5XHfm9dviEAWMOCnSFRGFeMH7TWhUROhuNCORGtoswFcxp6KZ4B12g/FSBH0S3ddsOAv0Pls9SxLqAh2e0ZhYgZxElwbou3ky6j6P3xPh6zjIY6eHg/EZGERx7rRA3L3KDe71n1dP8iniuDwIAF8RKK7nnSykkPt+lLMEy3BVCvILkmaudqHcTatvgAEPQh+vGbZcYLH8uD1wryNqxDsyuPbv3XWrP3bbwZguL5fcbtAFju7mzNnS33ECw+605dnu01t19jEyjfw==&lt;/diagram&gt;&lt;/mxfile&gt;&quot;}"></div>

<p>concurrentåŒ…çš„å®ç°ç»“æ„å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒAQSã€éé˜»å¡æ•°æ®ç»“æ„å’ŒåŸå­å˜é‡ç±»ç­‰åŸºç¡€ç±»éƒ½æ˜¯åŸºäºvolatileå˜é‡çš„è¯»/å†™å’ŒCASå®ç°ï¼Œè€ŒåƒLockã€åŒæ­¥å™¨ã€é˜»å¡é˜Ÿåˆ—ã€Executorå’Œå¹¶å‘å®¹å™¨ç­‰é«˜å±‚ç±»åˆæ˜¯åŸºäºåŸºç¡€ç±»å®ç°</p>
<h1 id="äº’æ–¥é”-è¯»å†™é”"><a href="#äº’æ–¥é”-è¯»å†™é”" class="headerlink" title="äº’æ–¥é”/è¯»å†™é”"></a>äº’æ–¥é”/è¯»å†™é”</h1><p>ä¸ç‹¬äº«é”/å…±äº«é”çš„æ¦‚å¿µå·®ä¸å¤šï¼Œæ˜¯ç‹¬äº«é”/å…±äº«é”çš„å…·ä½“å®ç°ã€‚</p>
<p>äº’æ–¥é”ï¼šåœ¨è®¿é—®å…±äº«èµ„æºä¹‹å‰å¯¹å…¶è¿›è¡ŒåŠ é”æ“ä½œï¼Œåœ¨è®¿é—®å®Œæˆä¹‹åè¿›è¡Œè§£é”æ“ä½œã€‚åŠ é”åï¼Œä»»ä½•å…¶ä»–è¯•å›¾å†æ¬¡åŠ é”çš„çº¿ç¨‹ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°å½“å‰è¿›ç¨‹è§£é”ã€‚<br>å¦‚æœè§£é”æ—¶æœ‰ä¸€ä¸ªä»¥ä¸Šçš„çº¿ç¨‹é˜»å¡ï¼Œé‚£ä¹ˆæ‰€æœ‰è¯¥é”ä¸Šçš„çº¿ç¨‹éƒ½è¢«å˜æˆå°±ç»ªçŠ¶æ€ï¼Œ ç¬¬ä¸€ä¸ªå˜ä¸ºå°±ç»ªçŠ¶æ€çš„çº¿ç¨‹åˆæ‰§è¡ŒåŠ é”æ“ä½œï¼Œé‚£ä¹ˆå…¶ä»–çš„çº¿ç¨‹åˆä¼šè¿›å…¥ç­‰å¾…ã€‚ åœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè®¿é—®è¢«äº’æ–¥é”ä¿æŠ¤çš„èµ„æºã€‚</p>
<p>è¯»å†™é”æ—¢æ˜¯äº’æ–¥é”ï¼Œåˆæ˜¯å…±äº«é”ï¼Œreadæ¨¡å¼æ˜¯å…±äº«ï¼Œwriteæ˜¯äº’æ–¥(æ’å®ƒé”)çš„ã€‚</p>
<p>ReentrantLockå’Œsynchronizedéƒ½æ˜¯äº’æ–¥é”</p>
<p>ReadWriteLockæ˜¯è¯»å†™é”</p>
<p>è¯»å†™é”ç‰¹ç‚¹ï¼š<br>1ï¼‰å¤šä¸ªè¯»è€…å¯ä»¥åŒæ—¶è¿›è¡Œè¯»ã€‚<br>2ï¼‰å†™è€…å¿…é¡»äº’æ–¥ï¼ˆåªå…è®¸ä¸€ä¸ªå†™è€…å†™ï¼Œä¹Ÿä¸èƒ½è¯»è€…å†™è€…åŒæ—¶è¿›è¡Œï¼‰<br>3ï¼‰å†™è€…ä¼˜å…ˆäºè¯»è€…ï¼ˆä¸€æ—¦æœ‰å†™è€…ï¼Œåˆ™åç»­è¯»è€…å¿…é¡»ç­‰å¾…ï¼Œå”¤é†’æ—¶ä¼˜å…ˆè€ƒè™‘å†™è€…ï¼‰</p>
<p>åŒæ—¶è¯»å†™é”æœ‰ä¸‰ç§çŠ¶æ€ï¼šè¯»åŠ é”çŠ¶æ€ã€å†™åŠ é”çŠ¶æ€å’Œä¸åŠ é”çŠ¶æ€ã€‚</p>
<p>äº’æ–¥é”ç‰¹ç‚¹ï¼š<br>ä¸€æ¬¡åªèƒ½ä¸€ä¸ªçº¿ç¨‹æ‹¥æœ‰äº’æ–¥é”ï¼Œå…¶ä»–çº¿ç¨‹åªæœ‰ç­‰å¾…ã€‚å³æŸä¸€èµ„æºåŒæ—¶åªå…è®¸ä¸€ä¸ªè®¿é—®è€…å¯¹å…¶è¿›è¡Œè®¿é—®ï¼Œå…·æœ‰å”¯ä¸€æ€§å’Œæ’å®ƒæ€§ã€‚ä½†äº’æ–¥æ— æ³•é™åˆ¶è®¿é—®è€…å¯¹èµ„æºçš„è®¿é—®é¡ºåºï¼Œå³è®¿é—®æ˜¯æ— åºçš„ã€‚</p>
<p>æ˜¾ç„¶ï¼ŒåŒæ­¥æ˜¯ä¸€ç§æ›´ä¸ºå¤æ‚çš„äº’æ–¥ï¼Œè€Œäº’æ–¥æ˜¯ä¸€ç§ç‰¹æ®Šçš„åŒæ­¥ã€‚ä¹Ÿå°±æ˜¯è¯´äº’æ–¥æ˜¯ä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´ä¸å¯ä»¥åŒæ—¶è¿è¡Œï¼Œä»–ä»¬ä¼šç›¸äº’æ’æ–¥ï¼Œå¿…é¡»ç­‰å¾…ä¸€ä¸ªçº¿ç¨‹è¿è¡Œå®Œæ¯•ï¼Œå¦ä¸€ä¸ªæ‰èƒ½è¿è¡Œï¼Œè€ŒåŒæ­¥ä¹Ÿæ˜¯ä¸èƒ½åŒæ—¶è¿è¡Œï¼Œä½†ä»–æ˜¯å¿…é¡»è¦å®‰ç…§æŸç§æ¬¡åºæ¥è¿è¡Œç›¸åº”çš„çº¿ç¨‹ï¼ˆä¹Ÿæ˜¯ä¸€ç§äº’æ–¥ï¼‰ï¼</p>
<h1 id="ä¹è§‚é”-æ‚²è§‚é”"><a href="#ä¹è§‚é”-æ‚²è§‚é”" class="headerlink" title="ä¹è§‚é”/æ‚²è§‚é”"></a>ä¹è§‚é”/æ‚²è§‚é”</h1><p>æ‚²è§‚é”ï¼Œæ˜¯æŒ‡è®¤ä¸ºå¯¹äºåŒä¸€ä¸ªæ•°æ®çš„å¹¶å‘æ“ä½œå¿…ç„¶ä¼šå‘ç”Ÿä¿®æ”¹ï¼Œå³ä½¿ä¸ä¼šå‘ç”Ÿä¿®æ”¹ä¹Ÿè¿™ä¹ˆè®¤ä¸ºï¼Œæ‰€ä»¥ä¸€å®šè¦åŠ é”ã€‚<br>ä¹è§‚é”ï¼Œæ˜¯æŒ‡è®¤ä¸ºå¯¹äºåŒä¸€ä¸ªæ•°æ®çš„å¹¶å‘æ“ä½œä¸ä¸€å®šä¼šå‘ç”Ÿä¿®æ”¹ï¼Œåœ¨æ›´æ–°æ•°æ®çš„æ—¶å€™ï¼Œå°è¯•å»æ›´æ–°æ•°æ®ï¼Œå¦‚æœå¤±è´¥å°±ä¸æ–­å°è¯•ã€‚<br>æ‚²è§‚é”é€‚ç”¨äºå†™æ“ä½œå¤šçš„åœºæ™¯ï¼Œä¹è§‚é”é€‚ç”¨äºè¯»æ“ä½œå¤šçš„åœºæ™¯ã€‚</p>
<p>è¯¦è§ <a href="https://homxuwang.github.io/2019/06/11/%E4%B9%90%E8%A7%82%E9%94%81%E4%B8%8E%E6%82%B2%E8%A7%82%E9%94%81/">https://homxuwang.github.io/2019/06/11/%E4%B9%90%E8%A7%82%E9%94%81%E4%B8%8E%E6%82%B2%E8%A7%82%E9%94%81/</a></p>
<h1 id="è‡ªæ—‹é”"><a href="#è‡ªæ—‹é”" class="headerlink" title="è‡ªæ—‹é”"></a>è‡ªæ—‹é”</h1><p>è‡ªæ—‹é”ï¼Œæ˜¯æŒ‡å°è¯•è·å–é”çš„çº¿ç¨‹ä¸ä¼šé˜»å¡ï¼Œè€Œæ˜¯å¾ªç¯çš„æ–¹å¼ä¸æ–­å°è¯•ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯å‡å°‘çº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å¸¦æ¥çš„å¼€é”ï¼Œæé«˜æ€§èƒ½ï¼Œç¼ºç‚¹æ˜¯å¾ªç¯ä¼šæ¶ˆè€—CPUï¼Œä¹Ÿæœ‰å¯èƒ½å¯¼è‡´æ­»é”ã€‚</p>
<p>åŸºæœ¬ä½œç”¨æ˜¯ç”¨äºçº¿ç¨‹ï¼ˆè¿›ç¨‹ï¼‰ä¹‹é—´çš„åŒæ­¥ã€‚ä¸æ™®é€šé”ä¸åŒçš„æ˜¯ï¼Œä¸€ä¸ªçº¿ç¨‹Aåœ¨è·å¾—æ™®é€šé”åï¼Œå¦‚æœå†æœ‰çº¿ç¨‹Bè¯•å›¾è·å–é”ï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹Bå°†ä¼šæŒ‚èµ·ï¼ˆé˜»å¡ï¼‰ï¼›è¯•æƒ³ä¸‹ï¼Œå¦‚æœä¸¤ä¸ªçº¿ç¨‹èµ„æºç«äº‰ä¸æ˜¯ç‰¹åˆ«æ¿€çƒˆï¼Œè€Œå¤„ç†å™¨é˜»å¡ä¸€ä¸ªçº¿ç¨‹å¼•èµ·çš„çº¿ç¨‹ä¸Šä¸‹æ–‡çš„åˆ‡æ¢çš„ä»£ä»·é«˜äºç­‰å¾…èµ„æºçš„ä»£ä»·çš„æ—¶å€™ï¼ˆé”çš„å·²ä¿æŒè€…ä¿æŒé”æ—¶é—´æ¯”è¾ƒçŸ­ï¼‰ï¼Œé‚£ä¹ˆçº¿ç¨‹Bå¯ä»¥ä¸æ”¾å¼ƒCPUæ—¶é—´ç‰‡ï¼Œè€Œæ˜¯åœ¨â€œåŸåœ°â€å¿™ç­‰ï¼Œç›´åˆ°é”çš„æŒæœ‰è€…é‡Šæ”¾äº†è¯¥é”ï¼Œè¿™å°±æ˜¯è‡ªæ—‹é”çš„åŸç†ï¼Œå¯è§è‡ªæ—‹é”æ˜¯ä¸€ç§éé˜»å¡é”ã€‚</p>
<p>å…³äºä¸¤ä¸ªç¼ºç‚¹ï¼š</p>
<ul>
<li>è¿‡å¤šæ¶ˆè€—CPUï¼šå¦‚æœé”çš„å½“å‰æŒæœ‰é•¿æ—¶é—´ä¸é‡Šæ”¾è¯¥é”ï¼Œé‚£ä¹ˆç­‰å¾…ç€å°†é•¿æ—¶é—´å æ®cpuæ—¶é—´ç‰‡ï¼Œå¯¼è‡´CPUèµ„æºæµªè´¹ï¼Œå› æ­¤å¯ä»¥è®¾ç½®ä¸€å®šçš„æ—¶é—´ï¼Œå½“é”æŒæœ‰è€…è¶…è¿‡è¿™ä¸ªæ—¶é—´ä¸é‡Šæ”¾é”æ—¶ï¼Œç­‰å¾…è€…ä¼šæ”¾å¼ƒCPUæ—¶é—´ç‰‡æ®µé˜»å¡ã€‚</li>
<li>æ­»é”é—®é¢˜ï¼šå¦‚æœæœ‰ä¸€ä¸ªçº¿ç¨‹è¿ç»­ä¸¤æ¬¡è¯•å›¾è·å¾—è‡ªæ—‹é”(æ¯”å¦‚åœ¨é€’å½’ç¨‹åºä¸­)ï¼Œç¬¬ä¸€æ¬¡è¿™ä¸ªçº¿ç¨‹è·å¾—äº†è¯¥é”ï¼Œå½“ç¬¬äºŒæ¬¡è¯•å›¾åŠ é”æ—¶ï¼Œæ£€æµ‹åˆ°é”å·²è¢«å ç”¨(å³è¢«è‡ªå·±å ç”¨äº†)ï¼Œé‚£ä¹ˆè¿™æ—¶å€™çº¿ç¨‹ä¼šç­‰å¾…è‡ªå·±é‡Šæ”¾è¯¥é”ï¼Œè€Œä¸èƒ½ç»§ç»­æ‰§è¡Œï¼Œè¿™æ ·å°±å‘ç”Ÿäº†æ­»é”é—®é¢˜ã€‚æ‰€ä»¥åœ¨é€’å½’ç¨‹åºä¸­ä½¿ç”¨è‡ªæ—‹é”åº”è¯¥éµå¾ªä»¥ä¸‹åŸåˆ™ï¼šé€’å½’ç¨‹åºå†³ä¸èƒ½åœ¨æŒæœ‰è‡ªæ—‹é”æ—¶è°ƒç”¨å®ƒè‡ªå·±ï¼Œä¹Ÿå†³ä¸èƒ½åœ¨é€’å½’è°ƒç”¨æ—¶è¯•å›¾è·å¾—ç›¸åŒçš„è‡ªæ—‹é”ã€‚</li>
</ul>
<p>å®ç°åŸç†ï¼šå¦‚æœè‡ªæ—‹é”è¢«å¦å¤–ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡æŒæœ‰ï¼Œé‚£ä¹ˆå½“å‰è·å–é”çš„çº¿ç¨‹å°†é™·å…¥whileå¾ªç¯ç­‰å¾…ï¼Œç›´åˆ°é‚£ä¸ªæŒæœ‰è‡ªæ—‹é”çš„çº¿ç¨‹å¯¹è±¡é‡Šæ”¾å®ƒæ‰€æŒæœ‰çš„è‡ªæ—‹é”ï¼Œé‚£ä¹ˆé‚£äº›æƒ³è¦è·å–è¯¥è‡ªæ—‹é”çš„çº¿ç¨‹å¯¹è±¡ å°†ä¼šæœ‰ä¸€ä¸ªè·å¾—è¯¥è‡ªæ—‹é”ã€‚ç­‰å¾…çš„æ—¶å€™ï¼Œå¹¶ä¸é‡Šæ”¾cpuæ—¶é—´ç‰‡ï¼Œç›¸æ¯”synchronized  wait()æ“ä½œï¼Œå‡å°äº†é‡Šæ”¾ï¼Œé‡æ–°è·å–çš„æ¶ˆè€—ã€‚ è¯¥è‡ªæ—‹é”é€‚ç”¨äºï¼Œå½“å‰çº¿ç¨‹ç«äº‰ä¸å¼ºçƒˆçš„æ—¶å€™ä½¿ç”¨ã€‚</p>
<h1 id="åˆ†æ®µé”"><a href="#åˆ†æ®µé”" class="headerlink" title="åˆ†æ®µé”"></a>åˆ†æ®µé”</h1><p>åˆ†æ®µé”ï¼Œæ˜¯ä¸€ç§é”çš„è®¾è®¡æ€è·¯ï¼Œå®ƒç»†åŒ–äº†é”çš„ç²’åº¦ï¼Œä¸»è¦è¿ç”¨åœ¨ConcurrentHashMapä¸­ï¼Œå®ç°é«˜æ•ˆçš„å¹¶å‘æ“ä½œï¼Œå½“æ“ä½œä¸éœ€è¦æ›´æ–°æ•´ä¸ªæ•°ç»„æ—¶ï¼Œå°±åªé”æ•°ç»„ä¸­çš„ä¸€é¡¹å°±å¯ä»¥äº†ã€‚</p>
<p>è¯´çš„ç®€å•ä¸€ç‚¹å°±æ˜¯ï¼šå®¹å™¨é‡Œæœ‰å¤šæŠŠé”ï¼Œæ¯ä¸€æŠŠé”ç”¨äºé”å®¹å™¨å…¶ä¸­ä¸€éƒ¨åˆ†æ•°æ®ï¼Œé‚£ä¹ˆå½“å¤šçº¿ç¨‹è®¿é—®å®¹å™¨é‡Œä¸åŒæ•°æ®æ®µçš„æ•°æ®æ—¶ï¼Œçº¿ç¨‹é—´å°±ä¸ä¼šå­˜åœ¨é”ç«äº‰ï¼Œä»è€Œå¯ä»¥æœ‰æ•ˆçš„æé«˜å¹¶å‘è®¿é—®æ•ˆç‡ï¼Œè¿™å°±æ˜¯ConcurrentHashMapæ‰€ä½¿ç”¨çš„é”åˆ†æ®µæŠ€æœ¯ï¼Œé¦–å…ˆå°†æ•°æ®åˆ†æˆä¸€æ®µä¸€æ®µçš„å­˜å‚¨ï¼Œç„¶åç»™æ¯ä¸€æ®µæ•°æ®é…ä¸€æŠŠé”ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹å ç”¨é”è®¿é—®å…¶ä¸­ä¸€ä¸ªæ®µæ•°æ®çš„æ—¶å€™ï¼Œå…¶ä»–æ®µçš„æ•°æ®ä¹Ÿèƒ½è¢«å…¶ä»–çº¿ç¨‹è®¿é—®ã€‚</p>
<p>æ¯”å¦‚ï¼šåœ¨ConcurrentHashMapä¸­ä½¿ç”¨äº†ä¸€ä¸ªåŒ…å«16ä¸ªé”çš„æ•°ç»„ï¼Œæ¯ä¸ªé”ä¿æŠ¤æ‰€æœ‰æ•£åˆ—æ¡¶çš„1/16ï¼Œå…¶ä¸­ç¬¬Nä¸ªæ•£åˆ—æ¡¶ç”±ç¬¬ï¼ˆN mod 16ï¼‰ä¸ªé”æ¥ä¿æŠ¤ã€‚å‡è®¾ä½¿ç”¨åˆç†çš„æ•£åˆ—ç®—æ³•ä½¿å…³é”®å­—èƒ½å¤Ÿå‡åŒ€çš„åˆ†éƒ¨ï¼Œé‚£ä¹ˆè¿™å¤§çº¦èƒ½ä½¿å¯¹é”çš„è¯·æ±‚å‡å°‘åˆ°è¶Šæ¥çš„1/16ã€‚ä¹Ÿæ­£æ˜¯è¿™é¡¹æŠ€æœ¯ä½¿å¾—ConcurrentHashMapæ”¯æŒå¤šè¾¾16ä¸ªå¹¶å‘çš„å†™å…¥çº¿ç¨‹ã€‚</p>
<p>å½“ç„¶ï¼Œä»»ä½•æŠ€æœ¯å¿…æœ‰å…¶åŠ£åŠ¿ï¼Œä¸ç‹¬å é”ç›¸æ¯”ï¼Œç»´æŠ¤å¤šä¸ªé”æ¥å®ç°ç‹¬å è®¿é—®å°†æ›´åŠ å›°éš¾è€Œä¸”å¼€é”€æ›´åŠ å¤§ã€‚</p>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a target="_blank" rel="noopener" href="https://juejin.im/post/5cdac52ce51d456e55623bfc">https://juejin.im/post/5cdac52ce51d456e55623bfc</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/IsResultXaL/article/details/53334750">https://blog.csdn.net/IsResultXaL/article/details/53334750</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/jiang13479/article/details/80679794">https://blog.csdn.net/jiang13479/article/details/80679794</a></p>
<p><a target="_blank" rel="noopener" href="http://ifeve.com/java_lock_see4/">http://ifeve.com/java_lock_see4/</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/54551800">https://zhuanlan.zhihu.com/p/54551800</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/tanga842428/article/details/52765037">https://blog.csdn.net/tanga842428/article/details/52765037</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/87ac733fda80">https://www.jianshu.com/p/87ac733fda80</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/sunp823/article/details/49886051">https://blog.csdn.net/sunp823/article/details/49886051</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/liushengbaoblog/article/details/39227863">https://blog.csdn.net/liushengbaoblog/article/details/39227863</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u010853261/article/details/54314486">https://blog.csdn.net/u010853261/article/details/54314486</a></p>
<script type="text/javascript" src="https://www.draw.io/js/viewer.min.js"></script>
  <p><a class="classtest-link" href="/tags/%E5%B9%B6%E5%8F%91/" rel="tag">å¹¶å‘</a> â€” Jun 17, 2019</p>
  


        </div>
        <div class="row mt-2">
  <h3>Search</h3>
  <div><input id="search-text" title="search" class="search-text" type="text" placeholder="search......"></div>
  <div style="margin-top: 1.5rem;">
    <ul id="result"></ul>
  </div>
</div>
        <div class="row mt-2">
  
    <div class="eight columns">
      <p id="madewith">Made with â¤ and
        <a class="footer-link icon" href="https://hexo.io" target="_blank" style="text-decoration: none;" rel="noreferrer" aria-label="Hexo.io">
        <svg class="hexo svg-hov" width="14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>Hexo.js</title><path d="M12 .007L1.57 6.056V18.05L12 23.995l10.43-6.049V5.952L12 .007zm4.798 17.105l-.939.521-.939-.521V12.94H9.08v4.172l-.94.521-.938-.521V6.89l.939-.521.939.521v4.172h5.84V6.89l.94-.521.938.521v10.222z"/></svg>
        </a>
        
        at <a href="https://en.wikipedia.org/wiki/Earth" target="_blank" rel="noreferrer">Earth</a>.</p>
        
    </div>

    <!-- Sepcial thanks to https://simpleicons.org/ for the icons -->
    <div class="four columns mb-3 posisi" >
      
      <a class="ml-0 footer-link icon" href="https://github.com/homxuwang" target="_blank" style="text-decoration: none" rel="noreferrer" aria-label="GitHub">
        <svg class="github svg-hov" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
      </a>
      

      

      

      

      

    </div>
  
</div>

      </div>

    </div>

  </div>
  <script src="/js/nanobar.min.js"></script>

  <script>
    var options = {
      classname: 'nanobar',
      id: 'myNanobar'
    };
    var nanobar = new Nanobar(options);
    nanobar.go(30);
    nanobar.go(76);
    nanobar.go(100);
  </script>

</body>

</html>