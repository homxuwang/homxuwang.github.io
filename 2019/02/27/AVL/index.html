<!DOCTYPE html>
<html lang="zh-Hans">

<head>

  <!-- Minima -->
  <!-- Hexo theme created by @adisaktijrs -->

  <!-- Basic Page Needs
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <meta charset="utf-8">

  
  <title>AVL</title>
  
  <link rel="canonical" href="http://homxuwang.github.io/2019/02/27/AVL/">
  
  <meta name="description" content="AVLçš„å®šä¹‰å’Œå¹³è¡¡å› å­AVLæ ‘å³å¹³è¡¡äºŒå‰æ ‘ã€‚AVLæ ‘çš„å®šä¹‰é¦–å…ˆè¦æ±‚è¯¥æ ‘æ˜¯äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆæ»¡è¶³æ’åºè§„åˆ™ï¼‰ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šå¢åŠ äº†æ¯ä¸ªèŠ‚ç‚¹çš„å¹³è¡¡å› å­çš„å®šä¹‰ï¼Œä¸€ä¸ªèŠ‚ç‚¹çš„å¹³è¡¡å› å­æ˜¯è¯¥èŠ‚ç‚¹çš„å·¦å­æ ‘æ ‘é«˜å‡å»å³å­æ ‘æ ‘é«˜çš„å€¼ã€‚ç‰¹ç‚¹ï¼šå®ƒæ˜¯ä¸€æ£µç©ºæ ‘æˆ–å®ƒçš„å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1ï¼Œå¹¶ä¸”å·¦å³ä¸¤ä¸ªå­æ ‘éƒ½æ˜¯ä¸€æ£µå¹³è¡¡äºŒå‰æ ‘ã€‚">
  
  
  <meta name="author" content="homxuwang">
  
  
  
  <meta property="og:site_name" content="Homxu" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="AVL" />
  
  <meta property="og:description" content="AVLçš„å®šä¹‰å’Œå¹³è¡¡å› å­AVLæ ‘å³å¹³è¡¡äºŒå‰æ ‘ã€‚AVLæ ‘çš„å®šä¹‰é¦–å…ˆè¦æ±‚è¯¥æ ‘æ˜¯äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆæ»¡è¶³æ’åºè§„åˆ™ï¼‰ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šå¢åŠ äº†æ¯ä¸ªèŠ‚ç‚¹çš„å¹³è¡¡å› å­çš„å®šä¹‰ï¼Œä¸€ä¸ªèŠ‚ç‚¹çš„å¹³è¡¡å› å­æ˜¯è¯¥èŠ‚ç‚¹çš„å·¦å­æ ‘æ ‘é«˜å‡å»å³å­æ ‘æ ‘é«˜çš„å€¼ã€‚ç‰¹ç‚¹ï¼šå®ƒæ˜¯ä¸€æ£µç©ºæ ‘æˆ–å®ƒçš„å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1ï¼Œå¹¶ä¸”å·¦å³ä¸¤ä¸ªå­æ ‘éƒ½æ˜¯ä¸€æ£µå¹³è¡¡äºŒå‰æ ‘ã€‚">
  
  <meta property="og:url" content="http://homxuwang.github.io/2019/02/27/AVL/" />

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="AVL">
  
  <meta name="twitter:description" content="AVLçš„å®šä¹‰å’Œå¹³è¡¡å› å­AVLæ ‘å³å¹³è¡¡äºŒå‰æ ‘ã€‚AVLæ ‘çš„å®šä¹‰é¦–å…ˆè¦æ±‚è¯¥æ ‘æ˜¯äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆæ»¡è¶³æ’åºè§„åˆ™ï¼‰ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šå¢åŠ äº†æ¯ä¸ªèŠ‚ç‚¹çš„å¹³è¡¡å› å­çš„å®šä¹‰ï¼Œä¸€ä¸ªèŠ‚ç‚¹çš„å¹³è¡¡å› å­æ˜¯è¯¥èŠ‚ç‚¹çš„å·¦å­æ ‘æ ‘é«˜å‡å»å³å­æ ‘æ ‘é«˜çš„å€¼ã€‚ç‰¹ç‚¹ï¼šå®ƒæ˜¯ä¸€æ£µç©ºæ ‘æˆ–å®ƒçš„å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1ï¼Œå¹¶ä¸”å·¦å³ä¸¤ä¸ªå­æ ‘éƒ½æ˜¯ä¸€æ£µå¹³è¡¡äºŒå‰æ ‘ã€‚">
  
  
  
  
  <meta name="twitter:url" content="http://homxuwang.github.io/2019/02/27/AVL/" />

  <!-- Mobile Specific Metas
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Preload fonts
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <link rel="preload" href="/fonts/dm-serif-display-v4-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/fonts/inter-v2-latin-regular.woff2" as="font" type="font/woff2" crossorigin>

  <!-- CSS
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  
<link rel="stylesheet" href="/css/normalize.css">

  
<link rel="stylesheet" href="/css/skeleton.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
<link rel="stylesheet" href="/css/prism-dark.css">

  
<link rel="stylesheet" href="/css/prism-line-numbers.css">

  <!-- User css -->
  
  
<link rel="stylesheet" href="/css/user.css">

  

  <!-- Favicon
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <link rel="icon" type="image/png" href="/images/favicon.png">

  <!-- Custom Theme Color Style
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <style>
  a:not(.icon) {
    text-decoration-color: #0FA0CE;
    background-image: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0) 50%,
      #0FA0CE 50%
    );
  }
  blockquote {
    border-left: 8px solid #0FA0CE;
  }
  .nanobar .bar {
    background: #0FA0CE;
  }
  .button.button-primary:hover,
  button.button-primary:hover,
  input[type="submit"].button-primary:hover,
  input[type="reset"].button-primary:hover,
  input[type="button"].button-primary:hover,
  .button.button-primary:focus,
  button.button-primary:focus,
  input[type="submit"].button-primary:focus,
  input[type="reset"].button-primary:focus,
  input[type="button"].button-primary:focus {
    background-color: #0FA0CE;
    border-color: #0FA0CE;
  }
  input[type="email"]:focus,
  input[type="number"]:focus,
  input[type="search"]:focus,
  input[type="text"]:focus,
  input[type="tel"]:focus,
  input[type="url"]:focus,
  input[type="password"]:focus,
  textarea:focus,
  select:focus {
    border: 1px solid #0FA0CE;
  }
</style>

  <!-- Google Analytics (With Privacy Settings On)
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  

  
  <script src="/js/pic.min.js" defer></script>
  

  
  <script src="/js/search.min.js" defer></script>
  

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div class="container">
    <div class="row">
      <div>

        <div class="row">
  <div class="two columns" style="max-width: 50px">
    <h1 class="mt-2 mode">
      <div onclick=setDarkMode(true) id="darkBtn">ğŸŒ‘</div>
      <div onclick=setDarkMode(false) id="lightBtn" class=hidden>â˜€ï¸</div>
      <script >
        if (localStorage.getItem('preferredTheme') == 'dark') {
          setDarkMode(true)
        }
        function setDarkMode(isDark) {
          var darkBtn = document.getElementById('darkBtn')
          var lightBtn = document.getElementById('lightBtn')
          if (isDark) {
            lightBtn.style.display = "block"
            darkBtn.style.display = "none"
            localStorage.setItem('preferredTheme', 'dark');
          } else {
            lightBtn.style.display = "none"
            darkBtn.style.display = "block"
            localStorage.removeItem('preferredTheme');
          }
          document.body.classList.toggle("darkmode");
        }
      </script>
    </h1>
  </div>

  <div class="six columns ml-1">
    <h1 class="mt-2">
      Hi July.HX
    </h1>
  </div>

  <div class="twelve columns">
    <div class="row">
      <div class="nine columns left">
        <a href="/">Home</a>
        
        
      </div>
    </div>
    <hr style="margin-bottom: 2.6rem">
  </div>
</div>

        <div class="trans">
            <h2>AVL</h2>

  <h1 id="AVLçš„å®šä¹‰å’Œå¹³è¡¡å› å­"><a href="#AVLçš„å®šä¹‰å’Œå¹³è¡¡å› å­" class="headerlink" title="AVLçš„å®šä¹‰å’Œå¹³è¡¡å› å­"></a>AVLçš„å®šä¹‰å’Œå¹³è¡¡å› å­</h1><p>AVLæ ‘å³å¹³è¡¡äºŒå‰æ ‘ã€‚AVLæ ‘çš„å®šä¹‰é¦–å…ˆè¦æ±‚è¯¥æ ‘æ˜¯äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆæ»¡è¶³æ’åºè§„åˆ™ï¼‰ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šå¢åŠ äº†æ¯ä¸ªèŠ‚ç‚¹çš„å¹³è¡¡å› å­çš„å®šä¹‰ï¼Œä¸€ä¸ªèŠ‚ç‚¹çš„å¹³è¡¡å› å­æ˜¯è¯¥èŠ‚ç‚¹çš„å·¦å­æ ‘æ ‘é«˜å‡å»å³å­æ ‘æ ‘é«˜çš„å€¼ã€‚<br>ç‰¹ç‚¹ï¼šå®ƒæ˜¯ä¸€æ£µç©ºæ ‘æˆ–å®ƒçš„å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1ï¼Œå¹¶ä¸”å·¦å³ä¸¤ä¸ªå­æ ‘éƒ½æ˜¯ä¸€æ£µå¹³è¡¡äºŒå‰æ ‘ã€‚åœ¨AVLæ ‘ä¸­ä»»ä½•èŠ‚ç‚¹çš„ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦æœ€å¤§å·®åˆ«ä¸ºä¸€ï¼Œæ‰€ä»¥å®ƒä¹Ÿè¢«ç§°ä¸ºå¹³è¡¡äºŒå‰æ ‘</p>
<p><img src="AVL/1.png" alt="å·¦è¾¹ä¸ºAVLæ ‘"></p>
<p>å¹³è¡¡å› å­BFï¼šè¯¥èŠ‚ç‚¹çš„å·¦å­æ ‘çš„æ·±åº¦å‡å»å®ƒçš„å³å­æ ‘æ·±åº¦ã€‚</p>
<p><img src="AVL/2.png" alt="è®¡ç®—å¹³è¡¡å› å­å³ç”¨å·¦å­æ ‘çš„é«˜åº¦å‡å³å­æ ‘çš„é«˜åº¦,çº¢è‰²è¡¨ç¤ºè¯¥èŠ‚ç‚¹çš„æ·±åº¦,è“è‰²è¡¨ç¤ºå¹³è¡¡å› å­"></p>
<p>å¯è§å›¾ä¸­çš„å¹³è¡¡å› å­æœ‰2,é‚£ä¹ˆè¿™æ£µæ ‘ä¸æ˜¯ä¸€ä¸ªå¹³è¡¡äºŒå‰æ ‘ã€‚</p>
<h1 id="è®¡ç®—èŠ‚ç‚¹çš„é«˜åº¦å’Œå¹³è¡¡å› å­"><a href="#è®¡ç®—èŠ‚ç‚¹çš„é«˜åº¦å’Œå¹³è¡¡å› å­" class="headerlink" title="è®¡ç®—èŠ‚ç‚¹çš„é«˜åº¦å’Œå¹³è¡¡å› å­"></a>è®¡ç®—èŠ‚ç‚¹çš„é«˜åº¦å’Œå¹³è¡¡å› å­</h1><p>ç”±ä¸Šé¢çš„å®šä¹‰å¯ä»¥çŸ¥é“ï¼Œå¦‚æœæƒ³ä¿æŒäºŒåˆ†æœç´¢æ ‘çš„å¹³è¡¡ï¼Œé‚£ä¹ˆè¦è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„é«˜åº¦å€¼ï¼Œä»¥ä¾¿è®¡ç®—å¹³è¡¡å› å­ï¼Œæ ¹æ®å¹³è¡¡å› å­å¯¹äºŒåˆ†æœç´¢æ ‘è¿›è¡Œä¸€å®šæ“ä½œï¼Œä»¥ä¾¿ä¿æŒå¹³è¡¡ã€‚</p>
<p>åœ¨ä¹‹å‰BSTçš„åŸºç¡€ä¸Šè¿›è¡Œæ”¹å†™(BSTè§é™„å½•),å®ç°æ–°çš„AVL.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BST</span>&lt;<span class="title">K</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">K</span>&gt;, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">        <span class="keyword">public</span> K key;</span><br><span class="line">        <span class="keyword">public</span> V value;</span><br><span class="line">        <span class="keyword">public</span> Node left, right;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">int</span> heigth; <span class="comment">//æ ‘çš„é«˜åº¦</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(K key, V value)</span></span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.key = key;</span><br><span class="line">            <span class="keyword">this</span>.value = value;</span><br><span class="line">            left = <span class="keyword">null</span>;</span><br><span class="line">            right = <span class="keyword">null</span>;</span><br><span class="line">            heigth = <span class="number">1</span>; <span class="comment">//åˆå§‹åŒ–æ—¶ä¸º1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ¤æ–­è¯¥äºŒå‰æ ‘æ˜¯å¦æ˜¯ä¸€æ£µäºŒåˆ†æœç´¢æ ‘</span></span><br><span class="line">    <span class="comment">//äºŒåˆ†æœç´¢æ ‘çš„ä¸€ä¸ªæ€§è´¨ä¹‹ä¸€ï¼šåœ¨è¿›è¡Œä¸­åºéå†æ—¶ï¼Œéå†çš„ç»“æœæ‰€æœ‰å…ƒç´ æ˜¯æŒ‰é¡ºåºæ’åˆ—çš„</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isBST</span><span class="params">()</span></span>&#123;</span><br><span class="line">        ArrayList&lt;K&gt; keys = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        inOrder(root,keys);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; keys.size() ; i ++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(keys.get(i - <span class="number">1</span>).compareTo(keys.get(i)) &gt; <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">inOrder</span><span class="params">(Node node,ArrayList&lt;K&gt; keys)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        inOrder(node.left,keys);</span><br><span class="line">        keys.add(node.key);</span><br><span class="line">        inOrder(node.right,keys);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ¤æ–­è¯¥äºŒå‰æ ‘æ˜¯å¦æ˜¯ä¸€æ£µå¹³è¡¡äºŒå‰æ ‘</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isBalanced</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> isBalanced(root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ¤æ–­ä»¥Nodeä¸ºæ ¹çš„äºŒå‰æ ‘æ˜¯å¦æ˜¯ä¸€é¢—å¹³è¡¡äºŒå‰æ ‘,é€’å½’ç®—æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isBalanced</span><span class="params">(Node node)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> balanceFactor = getBalanceFactor(node);</span><br><span class="line">        <span class="keyword">if</span>(Math.abs(balanceFactor) &gt; <span class="number">1</span> )</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">return</span> isBalanced(node.left) &amp;&amp; isBalanced(node.right);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å¾—èŠ‚ç‚¹nodeçš„é«˜åº¦</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getHeight</span><span class="params">(Node node)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> node.heigth;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">     <span class="comment">//è·å¾—èŠ‚ç‚¹çš„å¹³è¡¡å› å­</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getBalanceFactor</span><span class="params">(Node node)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> getHeight(node.left) - getHeight(node.right);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘ä»¥nodeä¸ºæ ¹çš„äºŒåˆ†æœç´¢æ ‘ä¸­æ’å…¥å…ƒç´ (key, value)ï¼Œé€’å½’ç®—æ³•</span></span><br><span class="line">    <span class="comment">// è¿”å›æ’å…¥æ–°èŠ‚ç‚¹åäºŒåˆ†æœç´¢æ ‘çš„æ ¹</span></span><br><span class="line">    <span class="comment">//åœ¨è¿™ä¸ªå‡½æ•°ä¸­è¦å¯¹heightè¿›è¡Œç»´æŠ¤</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">add</span><span class="params">(Node node, K key, V value)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line">            size ++;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Node(key, value);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(key.compareTo(node.key) &lt; <span class="number">0</span>)</span><br><span class="line">            node.left = add(node.left, key, value);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(key.compareTo(node.key) &gt; <span class="number">0</span>)</span><br><span class="line">            node.right = add(node.right, key, value);</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">// key.compareTo(node.key) == 0</span></span><br><span class="line">            node.value = value;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ›´æ–°height</span></span><br><span class="line">        node.heigth = <span class="number">1</span> + Math.max(getHeight(node.left),getHeight(node.right));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¡ç®—å¹³è¡¡å› å­</span></span><br><span class="line">        <span class="keyword">int</span> balanceFactor = getBalanceFactor(node);</span><br><span class="line">        <span class="keyword">if</span>(Math.abs(balanceFactor) &gt; <span class="number">1</span>)</span><br><span class="line">            System.out.println(<span class="string">&quot;unbalanced :&quot;</span> + balanceFactor);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šä»£ç å¯¹AVLæ ‘çš„åŸºæœ¬æ“ä½œè¿›è¡Œäº†ç¼–å†™,å…¶ä¸­çœç•¥äº†éƒ¨åˆ†å’ŒBSTç›¸åŒçš„ä»£ç </p>
<h1 id="æ—‹è½¬æ“ä½œ"><a href="#æ—‹è½¬æ“ä½œ" class="headerlink" title="æ—‹è½¬æ“ä½œ"></a>æ—‹è½¬æ“ä½œ</h1><p>åœ¨è¿›è¡Œäº†æ’å…¥èŠ‚ç‚¹çš„æ“ä½œåï¼Œæ‰æœ‰å¯èƒ½ç ´åå½“å‰æ ‘çš„å¹³è¡¡æ€§ã€‚è¿™æ—¶å€™éœ€è¦é‡æ–°è®¡ç®—å…¶çˆ¶èŠ‚ç‚¹å’Œç¥–å…ˆèŠ‚ç‚¹çš„å¹³è¡¡å› å­ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦å¤±å»äº†å¹³è¡¡æ€§ã€‚å› ä¸ºæœ¬èº«æ’å…¥èŠ‚ç‚¹çš„<code>add</code>æ“ä½œå°±æ˜¯ç”¨é€’å½’å®ç°çš„ï¼Œæ‰€ä»¥åœ¨é€’å½’ä»£ç ä¸­è¿›è¡Œæ”¹å†™ã€‚</p>
<h2 id="å³æ—‹è½¬"><a href="#å³æ—‹è½¬" class="headerlink" title="å³æ—‹è½¬"></a>å³æ—‹è½¬</h2><p>å¦‚æœå¹³è¡¡å› å­å¤§äºä¸€å¹¶ä¸”æ˜¯åœ¨æ ‘çš„å·¦ä¾§çš„å·¦ä¾§æ·»åŠ </p>
<p>å¦‚å›¾æ‰€ç¤ºï¼Œæ˜¯ä¸¤ç§æœ€ç®€å•çš„å‘å·¦æ·»åŠ ç ´åäº†æ ‘çš„å¹³è¡¡æ€§çš„æƒ…å†µï¼Œä»¥ç»¿è‰²è¡¨ç¤ºçš„èŠ‚ç‚¹å…¶æ•´ä½“å‘å·¦å€¾æ–œ.å·¦å­æ ‘çš„é«˜åº¦å¤§äºå…¶å³å­æ ‘çš„é«˜åº¦å¹¶ä¸”å…¶å·¦å­©å­ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p>
<p><img src="AVL/3.png"></p>
<p>è¿™æ—¶å€™çš„è§£å†³æ–¹æ³•æ˜¯è¿›è¡Œå³æ—‹è½¬ã€‚</p>
<p><img src="AVL/4.png" alt="å³æ—‹è½¬"></p>
<p>åœ¨<code>add</code>å‡½æ•°ä¸­è¿›è¡Œä¿®æ”¹:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯¹èŠ‚ç‚¹yè¿›è¡Œå‘å³æ—‹è½¬æ“ä½œï¼Œè¿”å›æ—‹è½¬åçš„æ–°çš„æ ¹èŠ‚ç‚¹x</span></span><br><span class="line"><span class="comment">//        y                              x</span></span><br><span class="line"><span class="comment">//       / \                           /   \</span></span><br><span class="line"><span class="comment">//      x   T4     å‘å³æ—‹è½¬ (y)        z     y</span></span><br><span class="line"><span class="comment">//     / \       - - - - - - - -&gt;    / \   / \</span></span><br><span class="line"><span class="comment">//    z   T3                       T1  T2 T3 T4</span></span><br><span class="line"><span class="comment">//   / \</span></span><br><span class="line"><span class="comment">// T1   T2</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">rightRotate</span><span class="params">(Node y)</span></span>&#123;</span><br><span class="line">    Node x = y.left;</span><br><span class="line">    Node T3 = x.right;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘å³æ—‹è½¬</span></span><br><span class="line">    x.right = y;</span><br><span class="line">    y.left = T3;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ›´æ–°height</span></span><br><span class="line">    y.heigth = Math.max(getHeight(y.left),getHeight(y.right));</span><br><span class="line">    x.heigth = Math.max(getHeight(x.left),getHeight(x.right));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">add</span><span class="params">(Node node, K key, V value)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line">        size ++;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Node(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(key.compareTo(node.key) &lt; <span class="number">0</span>)</span><br><span class="line">        node.left = add(node.left, key, value);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(key.compareTo(node.key) &gt; <span class="number">0</span>)</span><br><span class="line">        node.right = add(node.right, key, value);</span><br><span class="line">    <span class="keyword">else</span> <span class="comment">// key.compareTo(node.key) == 0</span></span><br><span class="line">        node.value = value;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›´æ–°height</span></span><br><span class="line">    node.heigth = <span class="number">1</span> + Math.max(getHeight(node.left),getHeight(node.right));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¡ç®—å¹³è¡¡å› å­</span></span><br><span class="line">    <span class="keyword">int</span> balanceFactor = getBalanceFactor(node);</span><br><span class="line">    <span class="comment">// if(Math.abs(balanceFactor) &gt; 1)</span></span><br><span class="line">    <span class="comment">//     System.out.println(&quot;unbalanced :&quot; + balanceFactor);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">///å¹³è¡¡ç»´æŠ¤</span></span><br><span class="line">    <span class="keyword">if</span>(balanceFactor &gt; <span class="number">1</span> &amp;&amp; getBalanceFactor(node.left) &gt;= <span class="number">0</span>)</span><br><span class="line">       <span class="keyword">return</span> rightRotate(node);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å·¦æ—‹è½¬"><a href="#å·¦æ—‹è½¬" class="headerlink" title="å·¦æ—‹è½¬"></a>å·¦æ—‹è½¬</h2><p>åŒç†ï¼Œå½“æ’å…¥çš„å…ƒç´ åœ¨ä¸å¹³è¡¡çš„èŠ‚ç‚¹çš„å³ä¾§çš„å³ä¾§æ—¶ï¼Œè¿›è¡Œåæ—‹è½¬æ“ä½œä»¥æ»¡è¶³å¹³è¡¡æ€§ã€‚å³å·¦æ—‹è½¬çš„æƒ…å†µæ˜¯å’Œå³æ—‹è½¬å®Œå…¨å¯¹ç§°çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹èŠ‚ç‚¹yè¿›è¡Œå‘å·¦æ—‹è½¬æ“ä½œï¼Œè¿”å›æ—‹è½¬åæ–°çš„æ ¹èŠ‚ç‚¹x</span></span><br><span class="line"><span class="comment">//    y                             x</span></span><br><span class="line"><span class="comment">//  /  \                          /   \</span></span><br><span class="line"><span class="comment">// T1   x      å‘å·¦æ—‹è½¬ (y)       y     z</span></span><br><span class="line"><span class="comment">//     / \   - - - - - - - -&gt;   / \   / \</span></span><br><span class="line"><span class="comment">//   T2  z                     T1 T2 T3 T4</span></span><br><span class="line"><span class="comment">//      / \</span></span><br><span class="line"><span class="comment">//     T3 T4</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">leftRotate</span><span class="params">(Node y)</span></span>&#123;</span><br><span class="line">    Node x = y.right;</span><br><span class="line">    Node T2 = x.left;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘å·¦æ—‹è½¬</span></span><br><span class="line">    x.left = y;</span><br><span class="line">    y.right = T2;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ›´æ–°height</span></span><br><span class="line">    y.heigth = Math.max(getHeight(y.left),getHeight(y.right)) + <span class="number">1</span>;</span><br><span class="line">    x.heigth = Math.max(getHeight(x.left),getHeight(x.right)) + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">add</span><span class="params">(Node node, K key, V value)</span></span>&#123;</span><br><span class="line">    <span class="comment">//...çœç•¥éƒ¨åˆ†ä»£ç </span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å¹³è¡¡ç»´æŠ¤</span></span><br><span class="line">    <span class="keyword">if</span>(balanceFactor &gt; <span class="number">1</span> &amp;&amp; getBalanceFactor(node.left) &gt;= <span class="number">0</span>) <span class="comment">//å·¦å­æ ‘æ¯”å³å­æ ‘é«˜</span></span><br><span class="line">       <span class="keyword">return</span> rightRotate(node);</span><br><span class="line">    <span class="keyword">if</span>(balanceFactor &lt; -<span class="number">1</span> &amp;&amp; getBalanceFactor(node.right) &lt;= <span class="number">0</span>) <span class="comment">//å³å­æ ‘æ¯”å·¦å­æ ‘é«˜</span></span><br><span class="line">        <span class="keyword">return</span> leftRotate(node);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="LRå’ŒRL"><a href="#LRå’ŒRL" class="headerlink" title="LRå’ŒRL"></a>LRå’ŒRL</h1><h2 id="LR"><a href="#LR" class="headerlink" title="LR"></a>LR</h2><p>å½“æ’å…¥çš„å…ƒç´ åœ¨ä¸å¹³è¡¡èŠ‚ç‚¹çš„å·¦ä¾§çš„å³ä¾§(å³LR)ï¼Œè¿™æ—¶å€™ä¸èƒ½ä»…ä»…ä½¿ç”¨å³æ—‹è½¬ã€‚<br><img src="AVL/5.png" alt="LRçš„æƒ…å†µ"></p>
<p><img src="AVL/6.png" alt="LRçš„æƒ…å†µ"></p>
<p>è¿™æ—¶å€™éœ€è¦å…ˆå¯¹xè¿›è¡Œå·¦æ—‹è½¬ï¼Œè½¬åŒ–ä¸ºLLçš„æƒ…å†µ</p>
<p><img src="AVL/7.png" alt="xè¿›è¡Œå·¦æ—‹è½¬ï¼Œè½¬åŒ–ä¸ºLLçš„æƒ…å†µ"></p>
<p>åˆ°äº†è¿™ç§æƒ…å†µç»§ç»­å¯¹yè¿›è¡Œå³æ—‹è½¬å°±å¯ä»¥äº†ã€‚<br>ç»§ç»­å®Œå–„å¹³è¡¡ç»´æŠ¤çš„ä»£ç :</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//..çœç•¥ä»£ç </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¹³è¡¡ç»´æŠ¤</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// LL</span></span><br><span class="line"><span class="keyword">if</span>(balanceFactor &gt; <span class="number">1</span> &amp;&amp; getBalanceFactor(node.left) &gt;= <span class="number">0</span>) <span class="comment">//å·¦å­æ ‘æ¯”å³å­æ ‘é«˜</span></span><br><span class="line">    <span class="keyword">return</span> rightRotate(node);</span><br><span class="line"></span><br><span class="line"><span class="comment">// RR</span></span><br><span class="line"><span class="keyword">if</span>(balanceFactor &lt; -<span class="number">1</span> &amp;&amp; getBalanceFactor(node.right) &lt;= <span class="number">0</span>) <span class="comment">//å³å­æ ‘æ¯”å·¦å­æ ‘é«˜</span></span><br><span class="line">    <span class="keyword">return</span> leftRotate(node);</span><br><span class="line"></span><br><span class="line"><span class="comment">// LR</span></span><br><span class="line"><span class="keyword">if</span>(balanceFactor &gt; <span class="number">1</span> &amp;&amp; getBalanceFactor(node.left) &lt; <span class="number">0</span>)  &#123;</span><br><span class="line">    node.left = leftRotate(node.left); <span class="comment">//è½¬æ¢ä¸ºLL</span></span><br><span class="line">    <span class="keyword">return</span> rightRotate(node);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//..çœç•¥ä»£ç </span></span><br></pre></td></tr></table></figure>

<h2 id="RL"><a href="#RL" class="headerlink" title="RL"></a>RL</h2><p>RLæ˜¯LRå¯¹ç§°çš„ä¸€ç§æƒ…å†µï¼Œå…ˆå°†å…¶è½¬åŒ–ä¸ºRRçš„æƒ…å†µï¼Œåœ¨è¿›è¡Œå·¦æ—‹è½¬ã€‚å°±ä¸åœ¨èµ˜è¿°äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// RL</span></span><br><span class="line"><span class="keyword">if</span>(balanceFactor &lt; -<span class="number">1</span> &amp;&amp; getBalanceFactor(node.right) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    node.right = rightRotate(node.right); <span class="comment">//è½¬åŒ–ä¸ºRR</span></span><br><span class="line">    <span class="keyword">return</span> leftRotate(node);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="åˆ é™¤å…ƒç´ "><a href="#åˆ é™¤å…ƒç´ " class="headerlink" title="åˆ é™¤å…ƒç´ "></a>åˆ é™¤å…ƒç´ </h1><p>åˆ é™¤å…ƒç´ ä¹Ÿå’Œæ·»åŠ å…ƒç´ ç±»ä¼¼ï¼Œåœ¨åˆ é™¤å…ƒç´ åæœ‰å¯èƒ½ä¼šç ´ååŸæ ‘çš„å¹³è¡¡æ€§ï¼Œæ‰€ä»¥åœ¨åˆ é™¤å…ƒç´ åè¦è¿›è¡Œå‘ä¸Šé€’å½’çš„æ“ä½œï¼Œé€å±‚åˆ¤æ–­ï¼Œè°ƒæ•´æ ‘çš„å¹³è¡¡ã€‚</p>
<p>åœ¨å¹³è¡¡äºŒå‰æ ‘çš„åˆ é™¤æ“ä½œä¸­ï¼Œ<code>node.left</code>æˆ–è€…<code>node.right</code>æ¥åˆ°äº†é€’å½’æ“ä½œçš„æ–°çš„nodeèŠ‚ç‚¹åï¼Œå½“å‰çš„nodeèŠ‚ç‚¹çš„å¹³è¡¡æ€§æœ‰å¯èƒ½å·²ç»é­åˆ°äº†ç ´åï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥è¿”å›å½“å‰çš„nodeï¼Œè¦å…ˆç»´æŠ¤nodeçš„å¹³è¡¡ï¼Œä¸èƒ½è¿™ä¹ˆæ—©çš„<code>return node;</code>,æ‰€ä»¥å…ˆç”¨<code>retNode</code>æš‚å­˜ä¸€ä¸‹è¦è¿”å›çš„node.è¿™æ ·å°±æœ‰æœºä¼šå¯¹<code>retNode</code>è¿›è¡Œå¹³è¡¡ç»´æŠ¤ï¼Œç„¶åå†è¿”å›ã€‚åŒç†,<code> key.compareTo(node.key) == 0</code>æ—¶,å¾…åˆ é™¤èŠ‚ç‚¹å·¦å­æ ‘æˆ–è€…å³å­æ ‘ä¸ºç©ºæ—¶è¿”å›çš„nodeä¹Ÿæš‚æ—¶èµ‹å€¼ç»™<code>retNode</code>.åŒæ ·<code>å¾…åˆ é™¤èŠ‚ç‚¹å·¦å³å­æ ‘å‡ä¸ä¸ºç©ºçš„æƒ…å†µ</code>ä¹Ÿæ˜¯ç”¨<code>retNode</code>æš‚å­˜ã€‚</p>
<p>è¿™æ ·,<code>retNode</code>ä¸­å­˜å‚¨çš„å°±æ˜¯åˆ é™¤äº†èŠ‚ç‚¹åè¦è¿”å›çš„æ–°çš„node.æ‰€ä»¥åœ¨å¾—åˆ°äº†<code>retNode</code>åè¦å¯¹retNodeè¿›è¡Œåˆ¤æ–­ï¼Œç„¶åç»´æŠ¤å¹³è¡¡ã€‚è¿™æ—¶å€™çš„ç»´æŠ¤å¹³è¡¡æ“ä½œå…¶å®å’Œæ·»åŠ æ˜¯ä¸€æ ·çš„ï¼Œå…ˆæ›´æ–°heightï¼Œç„¶åè®¡ç®—å¹³è¡¡å› å­ï¼Œæœ€åæ ¹æ®ä¸åŒæƒ…å†µè¿›è¡Œæ—‹è½¬ã€‚åªæ˜¯è¿™æ—¶å€™å¤„ç†çš„å¯¹è±¡æ˜¯<code>retNode</code>ã€‚</p>
<p>è¦æ³¨æ„åœ¨<code>removeMin(Node node)</code>å‡½æ•°æ“ä½œæ—¶ä¹Ÿæœ‰å¯èƒ½æ‰“ç ´å¹³è¡¡ï¼Œæ‰€ä»¥ä¹Ÿè¦åœ¨è¿™ä¸ªå‡½æ•°ä¸­è¿›è¡Œå¹³è¡¡ç»´æŠ¤ã€‚å…¶å®å¯ä»¥æ”¹å†™ä¸º<code>successor.right = remove(node.right,successor.key);</code>å› ä¸º<code>remove()</code>å‡½æ•°æ·»åŠ äº†å¯¹å¹³è¡¡æ€§çš„å¤„ç†ï¼Œæ‰€ä»¥è¿™é‡Œçš„åˆ é™¤æœ€å°å€¼æ“ä½œè¿™æ ·æ”¹å†™æ˜¯å¯ä»¥çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// ä»äºŒåˆ†æœç´¢æ ‘ä¸­åˆ é™¤é”®ä¸ºkeyçš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">remove</span><span class="params">(K key)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    Node node = getNode(root, key);</span><br><span class="line">    <span class="keyword">if</span>(node != <span class="keyword">null</span>)&#123;</span><br><span class="line">        root = remove(root, key);</span><br><span class="line">        <span class="keyword">return</span> node.value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">remove</span><span class="params">(Node node, K key)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>( node == <span class="keyword">null</span> )</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    Node retNode;</span><br><span class="line">    <span class="keyword">if</span>( key.compareTo(node.key) &lt; <span class="number">0</span> )&#123;</span><br><span class="line">        node.left = remove(node.left , key);</span><br><span class="line">        retNode = node;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(key.compareTo(node.key) &gt; <span class="number">0</span> )&#123;</span><br><span class="line">        node.right = remove(node.right, key);</span><br><span class="line">        retNode = node;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;   <span class="comment">// key.compareTo(node.key) == 0</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¾…åˆ é™¤èŠ‚ç‚¹å·¦å­æ ‘ä¸ºç©ºçš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span>(node.left == <span class="keyword">null</span>)&#123;</span><br><span class="line">            Node rightNode = node.right;</span><br><span class="line">            node.right = <span class="keyword">null</span>;</span><br><span class="line">            size --;</span><br><span class="line">            retNode = rightNode;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¾…åˆ é™¤èŠ‚ç‚¹å³å­æ ‘ä¸ºç©ºçš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(node.right == <span class="keyword">null</span>)&#123;</span><br><span class="line">            Node leftNode = node.left;</span><br><span class="line">            node.left = <span class="keyword">null</span>;</span><br><span class="line">            size --;</span><br><span class="line">            retNode = leftNode;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span> &#123;<span class="comment">// å¾…åˆ é™¤èŠ‚ç‚¹å·¦å³å­æ ‘å‡ä¸ä¸ºç©ºçš„æƒ…å†µ</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">// æ‰¾åˆ°æ¯”å¾…åˆ é™¤èŠ‚ç‚¹å¤§çš„æœ€å°èŠ‚ç‚¹, å³å¾…åˆ é™¤èŠ‚ç‚¹å³å­æ ‘çš„æœ€å°èŠ‚ç‚¹</span></span><br><span class="line">                <span class="comment">// ç”¨è¿™ä¸ªèŠ‚ç‚¹é¡¶æ›¿å¾…åˆ é™¤èŠ‚ç‚¹çš„ä½ç½®</span></span><br><span class="line">                Node successor = minimum(node.right);</span><br><span class="line">                successor.right = remove(node.right, successor.key);</span><br><span class="line">                successor.left = node.left;</span><br><span class="line"></span><br><span class="line">                node.left = node.right = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">                retNode = successor;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ¤æ–­ä¸ºç©ºçš„æƒ…å†µï¼Œä»¥å…è®¿é—®heightä¼šå‡ºé”™</span></span><br><span class="line">    <span class="keyword">if</span>(retNode == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ›´æ–°height</span></span><br><span class="line">    retNode.heigth = <span class="number">1</span> + Math.max(getHeight(retNode.left),getHeight(retNode.right));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¡ç®—å¹³è¡¡å› å­</span></span><br><span class="line">    <span class="keyword">int</span> balanceFactor = getBalanceFactor(retNode);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¹³è¡¡ç»´æŠ¤</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// LL</span></span><br><span class="line">    <span class="keyword">if</span>(balanceFactor &gt; <span class="number">1</span> &amp;&amp; getBalanceFactor(retNode.left) &gt;= <span class="number">0</span>) <span class="comment">//å·¦å­æ ‘æ¯”å³å­æ ‘é«˜</span></span><br><span class="line">        <span class="keyword">return</span> rightRotate(retNode);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// RR</span></span><br><span class="line">    <span class="keyword">if</span>(balanceFactor &lt; -<span class="number">1</span> &amp;&amp; getBalanceFactor(retNode.right) &lt;= <span class="number">0</span>) <span class="comment">//å³å­æ ‘æ¯”å·¦å­æ ‘é«˜</span></span><br><span class="line">        <span class="keyword">return</span> leftRotate(retNode);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// LR</span></span><br><span class="line">    <span class="keyword">if</span>(balanceFactor &gt; <span class="number">1</span> &amp;&amp; getBalanceFactor(retNode.left) &lt; <span class="number">0</span>)  &#123;</span><br><span class="line">        retNode.left = leftRotate(retNode.left); <span class="comment">//è½¬æ¢ä¸ºLL</span></span><br><span class="line">        <span class="keyword">return</span> rightRotate(retNode);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// RL</span></span><br><span class="line">    <span class="keyword">if</span>(balanceFactor &lt; -<span class="number">1</span> &amp;&amp; getBalanceFactor(retNode.right) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        retNode.right = rightRotate(retNode.right); <span class="comment">//è½¬åŒ–ä¸ºRR</span></span><br><span class="line">        <span class="keyword">return</span> leftRotate(retNode);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> retNode;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="åŸºäºAVLæ ‘çš„setå’Œmap"><a href="#åŸºäºAVLæ ‘çš„setå’Œmap" class="headerlink" title="åŸºäºAVLæ ‘çš„setå’Œmap"></a>åŸºäºAVLæ ‘çš„setå’Œmap</h1><h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Map</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(K key,V value)</span></span>;</span><br><span class="line">    <span class="function">V <span class="title">remove</span><span class="params">(K key)</span></span>;            <span class="comment">//åˆ é™¤keyå¯¹åº”çš„é”®å€¼å¯¹,å¹¶è¿”å›å€¼</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(K key)</span></span>;  <span class="comment">//æ˜¯å¦å­˜å·²åœ¨key</span></span><br><span class="line">    <span class="function">V <span class="title">get</span><span class="params">(K key)</span></span>;               <span class="comment">//è·å¾—keyå¯¹åº”çš„valueå€¼</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">(K key,V newValue)</span></span>; <span class="comment">//æ›´æ–°å€¼</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getSize</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AVLMap</span>&lt;<span class="title">K</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">K</span>&gt;,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> AVLTree&lt;K,V&gt; avl;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AVLMap</span><span class="params">()</span></span>&#123;</span><br><span class="line">        avl = <span class="keyword">new</span> AVLTree&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getSize</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> avl.getSize();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> avl.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(K key,V value)</span></span>&#123;</span><br><span class="line">        avl.add(key,value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(K key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> avl.contains(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(K key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> avl.get(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(K key,V newValue)</span></span>&#123;</span><br><span class="line">        avl.set(key,newValue);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> V <span class="title">remove</span><span class="params">(K key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> avl.remove(key);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Set</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(E e)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">remove</span><span class="params">(E e)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">containes</span><span class="params">(E e)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getSize</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AVLSet</span>&lt;<span class="title">E</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">E</span>&gt;&gt; <span class="keyword">implements</span> <span class="title">Set</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> AVLTree&lt;E, Object&gt; avl;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AVLSet</span><span class="params">()</span></span>&#123;</span><br><span class="line">        avl = <span class="keyword">new</span> AVLTree&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getSize</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> avl.getSize();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> avl.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">containes</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> avl.contains(e);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(E e)</span></span>&#123;</span><br><span class="line">        avl.add(e, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(E e)</span></span>&#123;</span><br><span class="line">        avl.remove(e);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h1><h2 id="BST"><a href="#BST" class="headerlink" title="BST"></a>BST</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BST</span>&lt;<span class="title">K</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">K</span>&gt;, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">        <span class="keyword">public</span> K key;</span><br><span class="line">        <span class="keyword">public</span> V value;</span><br><span class="line">        <span class="keyword">public</span> Node left, right;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(K key, V value)</span></span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.key = key;</span><br><span class="line">            <span class="keyword">this</span>.value = value;</span><br><span class="line">            left = <span class="keyword">null</span>;</span><br><span class="line">            right = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Node root;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BST</span><span class="params">()</span></span>&#123;</span><br><span class="line">        root = <span class="keyword">null</span>;</span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getSize</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘äºŒåˆ†æœç´¢æ ‘ä¸­æ·»åŠ æ–°çš„å…ƒç´ (key, value)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(K key, V value)</span></span>&#123;</span><br><span class="line">        root = add(root, key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘ä»¥nodeä¸ºæ ¹çš„äºŒåˆ†æœç´¢æ ‘ä¸­æ’å…¥å…ƒç´ (key, value)ï¼Œé€’å½’ç®—æ³•</span></span><br><span class="line">    <span class="comment">// è¿”å›æ’å…¥æ–°èŠ‚ç‚¹åäºŒåˆ†æœç´¢æ ‘çš„æ ¹</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">add</span><span class="params">(Node node, K key, V value)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line">            size ++;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Node(key, value);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(key.compareTo(node.key) &lt; <span class="number">0</span>)</span><br><span class="line">            node.left = add(node.left, key, value);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(key.compareTo(node.key) &gt; <span class="number">0</span>)</span><br><span class="line">            node.right = add(node.right, key, value);</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">// key.compareTo(node.key) == 0</span></span><br><span class="line">            node.value = value;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›ä»¥nodeä¸ºæ ¹èŠ‚ç‚¹çš„äºŒåˆ†æœç´¢æ ‘ä¸­ï¼Œkeyæ‰€åœ¨çš„èŠ‚ç‚¹</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">getNode</span><span class="params">(Node node, K key)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(key.equals(node.key))</span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(key.compareTo(node.key) &lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> getNode(node.left, key);</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">// if(key.compareTo(node.key) &gt; 0)</span></span><br><span class="line">            <span class="keyword">return</span> getNode(node.right, key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(K key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getNode(root, key) != <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(K key)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        Node node = getNode(root, key);</span><br><span class="line">        <span class="keyword">return</span> node == <span class="keyword">null</span> ? <span class="keyword">null</span> : node.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(K key, V newValue)</span></span>&#123;</span><br><span class="line">        Node node = getNode(root, key);</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(key + <span class="string">&quot; doesn&#x27;t exist!&quot;</span>);</span><br><span class="line"></span><br><span class="line">        node.value = newValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›ä»¥nodeä¸ºæ ¹çš„äºŒåˆ†æœç´¢æ ‘çš„æœ€å°å€¼æ‰€åœ¨çš„èŠ‚ç‚¹</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">minimum</span><span class="params">(Node node)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node.left == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line">        <span class="keyword">return</span> minimum(node.left);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤æ‰ä»¥nodeä¸ºæ ¹çš„äºŒåˆ†æœç´¢æ ‘ä¸­çš„æœ€å°èŠ‚ç‚¹</span></span><br><span class="line">    <span class="comment">// è¿”å›åˆ é™¤èŠ‚ç‚¹åæ–°çš„äºŒåˆ†æœç´¢æ ‘çš„æ ¹</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">removeMin</span><span class="params">(Node node)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(node.left == <span class="keyword">null</span>)&#123;</span><br><span class="line">            Node rightNode = node.right;</span><br><span class="line">            node.right = <span class="keyword">null</span>;</span><br><span class="line">            size --;</span><br><span class="line">            <span class="keyword">return</span> rightNode;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        node.left = removeMin(node.left);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»äºŒåˆ†æœç´¢æ ‘ä¸­åˆ é™¤é”®ä¸ºkeyçš„èŠ‚ç‚¹</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> V <span class="title">remove</span><span class="params">(K key)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        Node node = getNode(root, key);</span><br><span class="line">        <span class="keyword">if</span>(node != <span class="keyword">null</span>)&#123;</span><br><span class="line">            root = remove(root, key);</span><br><span class="line">            <span class="keyword">return</span> node.value;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">remove</span><span class="params">(Node node, K key)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>( node == <span class="keyword">null</span> )</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>( key.compareTo(node.key) &lt; <span class="number">0</span> )&#123;</span><br><span class="line">            node.left = remove(node.left , key);</span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(key.compareTo(node.key) &gt; <span class="number">0</span> )&#123;</span><br><span class="line">            node.right = remove(node.right, key);</span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;   <span class="comment">// key.compareTo(node.key) == 0</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¾…åˆ é™¤èŠ‚ç‚¹å·¦å­æ ‘ä¸ºç©ºçš„æƒ…å†µ</span></span><br><span class="line">            <span class="keyword">if</span>(node.left == <span class="keyword">null</span>)&#123;</span><br><span class="line">                Node rightNode = node.right;</span><br><span class="line">                node.right = <span class="keyword">null</span>;</span><br><span class="line">                size --;</span><br><span class="line">                <span class="keyword">return</span> rightNode;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¾…åˆ é™¤èŠ‚ç‚¹å³å­æ ‘ä¸ºç©ºçš„æƒ…å†µ</span></span><br><span class="line">            <span class="keyword">if</span>(node.right == <span class="keyword">null</span>)&#123;</span><br><span class="line">                Node leftNode = node.left;</span><br><span class="line">                node.left = <span class="keyword">null</span>;</span><br><span class="line">                size --;</span><br><span class="line">                <span class="keyword">return</span> leftNode;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¾…åˆ é™¤èŠ‚ç‚¹å·¦å³å­æ ‘å‡ä¸ä¸ºç©ºçš„æƒ…å†µ</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ‰¾åˆ°æ¯”å¾…åˆ é™¤èŠ‚ç‚¹å¤§çš„æœ€å°èŠ‚ç‚¹, å³å¾…åˆ é™¤èŠ‚ç‚¹å³å­æ ‘çš„æœ€å°èŠ‚ç‚¹</span></span><br><span class="line">            <span class="comment">// ç”¨è¿™ä¸ªèŠ‚ç‚¹é¡¶æ›¿å¾…åˆ é™¤èŠ‚ç‚¹çš„ä½ç½®</span></span><br><span class="line">            Node successor = minimum(node.right);</span><br><span class="line">            successor.right = removeMin(node.right);</span><br><span class="line">            successor.left = node.left;</span><br><span class="line"></span><br><span class="line">            node.left = node.right = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> successor;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;sorcerers.stone.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line">        ArrayList&lt;String&gt; words = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(FileOperation.readFile(<span class="string">&quot;sorcerers.stone.txt&quot;</span>, words)) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Total words: &quot;</span> + words.size());</span><br><span class="line"></span><br><span class="line">            BST&lt;String, Integer&gt; map = <span class="keyword">new</span> BST&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span> (String word : words) &#123;</span><br><span class="line">                <span class="keyword">if</span> (map.contains(word))</span><br><span class="line">                    map.set(word, map.get(word) + <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    map.add(word, <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;Total different words: &quot;</span> + map.getSize());</span><br><span class="line">            System.out.println(<span class="string">&quot;Frequency of go: &quot;</span> + map.get(<span class="string">&quot;go&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;Frequency of stone: &quot;</span> + map.get(<span class="string">&quot;stone&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
  <p><a class="classtest-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">æ•°æ®ç»“æ„</a> â€” Feb 27, 2019</p>
  


        </div>
        <div class="row mt-2">
  <h3>Search</h3>
  <div><input id="search-text" title="search" class="search-text" type="text" placeholder="search......"></div>
  <div style="margin-top: 1.5rem;">
    <ul id="result"></ul>
  </div>
</div>
        <div class="row mt-2">
  
    <div class="eight columns">
      <p id="madewith">Made with â¤ and
        <a class="footer-link icon" href="https://hexo.io" target="_blank" style="text-decoration: none;" rel="noreferrer" aria-label="Hexo.io">
        <svg class="hexo svg-hov" width="14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>Hexo.js</title><path d="M12 .007L1.57 6.056V18.05L12 23.995l10.43-6.049V5.952L12 .007zm4.798 17.105l-.939.521-.939-.521V12.94H9.08v4.172l-.94.521-.938-.521V6.89l.939-.521.939.521v4.172h5.84V6.89l.94-.521.938.521v10.222z"/></svg>
        </a>
        
        at <a href="https://en.wikipedia.org/wiki/Earth" target="_blank" rel="noreferrer">Earth</a>.</p>
        
    </div>

    <!-- Sepcial thanks to https://simpleicons.org/ for the icons -->
    <div class="four columns mb-3 posisi" >
      
      <a class="ml-0 footer-link icon" href="https://github.com/homxuwang" target="_blank" style="text-decoration: none" rel="noreferrer" aria-label="GitHub">
        <svg class="github svg-hov" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
      </a>
      

      

      

      

      

    </div>
  
</div>

      </div>

    </div>

  </div>
  <script src="/js/nanobar.min.js"></script>

  <script>
    var options = {
      classname: 'nanobar',
      id: 'myNanobar'
    };
    var nanobar = new Nanobar(options);
    nanobar.go(30);
    nanobar.go(76);
    nanobar.go(100);
  </script>

</body>

</html>